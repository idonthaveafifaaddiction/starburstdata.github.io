<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Starburst Universe | Using SQL in Presto</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Starburst Universe - Using SQL in Presto">
    <meta property="og:description" content="Starburst Universe - your hub to all knowledge about Starburst products.">
    <meta property="og:image" content="/assets/img/logo/starburst-reverse.png">

    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/mdb.min.css">
    <link rel="stylesheet" href="/assets/css/highlight.css">
    <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>

<div class="wrap">
  <header style="padding-top:86px;">
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <a class="navbar-brand" href="/universe.html">
      <img src="/assets/img/logo/starburst-reverse.png" height="40" alt=" Starburst Universe">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/sep/index.html">Starburst Enterprise Presto (SEP)</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/marketplace/index.html">Marketplace deployments</a>
        </li>
        <li class="nav-item">
          <a class="nav-link"  href="/about.html">About</a>
        </li>
      </ul>
    </div>
  </nav>
</header>

    <div class="container spacer-60">
      <div class="row">
        <div class="col-md-9">
        



<div class="breadcrumbs">
  <p>
  
  <a href="/universe.html">HOME</a> >
  
  
    
      <a href="/sep/"
        style="text-transform: uppercase"
      > sep</a> >
    
  
    
      <a href="/sep/data-analyst/"
        style="text-transform: uppercase"
      > data analyst</a> >
    
  
    
      Using SQL in Presto
    
  </p>
</div>

        <h1 id="using-sql-in-presto">
        
        
          Using SQL in Presto <a href="#using-sql-in-presto" class="titleAnchor">#</a>
        
        
      </h1>
    

<p>Starburst Enterprise Presto (SEP)  brings Presto’s open source distributed SQL
engine for running fast analytic queries against various data sources ranging in
size from gigabytes to petabytes to even more data sources, with more robust
features. Because Presto is ANSI-compliant and supports most of the SQL
language features you depend on, you can hit the ground running.</p>

<p>Business intelligence users and data scientists can continue to use their
favorite tools such as Tableau, Qlik, Apache Superset to access and analyze
virtually any data source, or multiple data sources in a single query.</p>
      <h2 id="the-basics">
        
        
          The basics <a href="#the-basics" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>We know you want to jump right in, and we know you already have awesome
analytics skills. It’s just a matter of harnessing Presto to take your analytics
even further. With that in mind, you can browse our latest reference materials
to learn just how familiar Presto is:</p>

<ul>
  <li><a href="https://docs.starburstdata.com/latest/language.html">SQL language</a></li>
  <li><a href="https://docs.starburstdata.com/latest/sql.html">SQL statement syntax</a></li>
  <li><a href="https://docs.starburstdata.com/latest/functions.html">Functions and operators</a></li>
</ul>
      <h3 id="catalogs">
        
        
          Catalogs <a href="#catalogs" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>One key difference worth highlighting is the concept of catalogs. Each of your
data platforms is defined as a catalog in Presto, and that catalog in turn
defines schemas. Using a SQL client such as our CLI, you can discover what
catalogs are available:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">presto</span><span class="o">&gt;</span> <span class="k">SHOW</span> <span class="n">CATALOGS</span><span class="p">;</span>
 <span class="k">Catalog</span> 
<span class="c1">---------</span>
 <span class="n">hive_sales</span>  
 <span class="n">mysql_crm</span>
<span class="p">(</span><span class="mi">2</span> <span class="k">rows</span><span class="p">)</span></code></pre></figure>

<p>From there, you can use the familiar <code class="language-plaintext highlighter-rouge">SHOW SCHEMAS</code> command to drill further
down.</p>
      <h3 id="fully-qualified-table-names">
        
        
          Fully qualified table names <a href="#fully-qualified-table-names" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>In Presto, table names are fully qualified when they include the catalog name:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;catalog&gt;.&lt;schema&gt;.&lt;table&gt;
</code></pre></div></div>

<p>This becomes critical when creating <a href="/sep/data-analyst/query-federation.html">federated queries</a>.</p>
      <h3 id="walkthrough-general-sql-features">
        
        
          Walkthrough: general SQL features <a href="#walkthrough-general-sql-features" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>Just in case you’d like a review, here’s a walkthrough of some basic SQL
features in Presto from one of our founders, David Phillips:</p>

<div class="container">
  <div class="row">
    <div class="col-md-6">
       <div class="embed-container">
    <iframe src="https://www.youtube.com/embed/HN_95ObHAiw?start=585&amp;end=1060" width="350" height="240" frameborder="0" allowfullscreen="">
    </iframe>
  </div>
    </div>
    <div class="col-md-6">
      Topics:
      <ul>
        <li><a href="https://docs.starburstdata.com/latest/functions/conversion.html#format">Formatting</a></li>
        <li><a href="https://docs.starburstdata.com/latest/functions/conditional.html#case">CASE and searched CASE</a> expressions</li>
        <li><a href="https://docs.starburstdata.com/latest/functions/conditional.html#if">IF</a> expressions</li>
        <li><a href="https://docs.starburstdata.com/latest/functions/conditional.html#try">TRY</a> expressions</li>
        <li><a href="https://docs.starburstdata.com/latest/functions/lambda.html">Lambda</a> expressions</li>
      </ul>
      Click on the links to read more on that topic in our reference manual.<br /><br />
      <p class="caption">Running time: ~8 min.</p>
    </div>
  </div>
</div><hr />
      <h2 id="advanced-presto">
        
        
          Advanced Presto <a href="#advanced-presto" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Ready to move past the basics? For your convenience, we’ve divided the Advanced
SQL for Presto video training course up into topic sections, and provided links
to the relevant parts of our documentation below.</p>
      <h3 id="advanced-aggregation-techniques">
        
        
          Advanced aggregation techniques <a href="#advanced-aggregation-techniques" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="container">
  <div class="row">
    <div class="col-md-6">
       <div class="embed-container">
    <iframe src="https://www.youtube.com/embed/HN_95ObHAiw?start=1970&amp;end=3654" width="350" height="240" frameborder="0" allowfullscreen="">
    </iframe>
  </div>
    </div>
    <div class="col-md-6">
      Topics:
      <ul>
        <li><a href="https://docs.starburstdata.com/latest/functions/aggregate.html#count">count()</a> with DISTINCT&lt;/a&gt;</li>
        <li><a href="https://docs.starburstdata.com/latest/functions/aggregate.html#approximate-aggregate-functions">Approximations</a>, including counting and percentiles&lt;/a&gt;</li>
        <li><a href="https://docs.starburstdata.com/latest/functions/aggregate.html#general-aggregate-functions">max_by()</a> values</li>
        <li>Pivoting with <a href="https://docs.starburstdata.com/latest/functions/aggregate.html#general-aggregate-functions">count_if()</a> and FILTER</li>
        <li>Complex aggregations</li>
        <li><a href="https://docs.starburstdata.com/latest/functions/aggregate.html#checksum">Checksums</a></li>
        <li><a href="https://docs.starburstdata.com/latest/sql/select.html#rollup">ROLLUP</a></li>
        <li><a href="https://docs.starburstdata.com/latest/sql/select.html#cube">CUBE</a></li>
        <li><a href="https://docs.starburstdata.com/latest/sql/select.html?highlight=cube#grouping-sets">GROUPING SETS</a></li>
      </ul>
      <p class="caption">Running time: ~28 min.</p>
    </div>
  </div>
</div><hr />
      <h3 id="window-functions">
        
        
          Window functions <a href="#window-functions" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="container">
  <div class="row">
    <div class="col-md-6">
       <div class="embed-container">
    <iframe src="https://www.youtube.com/embed/HN_95ObHAiw?start=5280&amp;end=6768" width="350" height="240" frameborder="0" allowfullscreen="">
    </iframe>
  </div>
    </div>
    <div class="col-md-6">
      Topics:
      <ul>
        <li><a href="https://docs.starburstdata.com/latest/functions/window.html#row_number">Row numbering</a></li>
        <li><a href="https://docs.starburstdata.com/latest/functions/window.html#ranking-functions">Ranking</a></li>
        <li>Ranking and numbering without ordering</li>
        <li><a href="https://docs.starburstdata.com/latest/functions/window.html#ntile">Bucketing</a> and <a href="https://docs.starburstdata.com/latest/functions/window.html#percent_rank">percentage</a> ranking</li>
        <li><a href="https://docs.starburstdata.com/latest/functions/window.html">Partitioning</a></li>
        <li><a href="https://docs.starburstdata.com/latest/functions/conversion.html#format">Accessing leading and training rows with <a href="https://docs.starburstdata.com/latest/functions/window.html#lead">lead()</a> and <a href="https://docs.starburstdata.com/latest/functions/window.html#lag">lag()&lt;/&gt; &lt;/li&gt;
        <li><a href="https://docs.starburstdata.com/latest/functions/window.html">Window frames</a></li>
        <li><a href="https://docs.starburstdata.com/latest/functions/conversion.html#format">Accessing <a href="https://docs.starburstdata.com/latest/functions/window.html#first_value">first</a>, <a href="https://docs.starburstdata.com/latest/functions/window.html#last_value">last</a> and <a href="https://docs.starburstdata.com/latest/functions/window.html#nth_value">Nth</a> values</a></li>
        <li>ROWS vs RANGE using <a href="https://docs.starburstdata.com/latest/functions/aggregate.html#array_agg">array_agg()</a></li>
        <li>Using aggregations in window functions</li>
      &lt;/ul&gt;
      <p class="caption">Running time: ~25 min.</p>
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;<hr />

### Array and map functions

Many data stores allow to to create arrays, but it isn't always easy. Presto
allows you to easily create arrays and maps with your data. Creating arrays with
your data is easy in Presto:


<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="k">AS</span> <span class="n">integers</span><span class="p">,</span>
       <span class="n">ARRAY</span><span class="p">[</span><span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'world'</span><span class="p">]</span> <span class="k">AS</span> <span class="n">varchars</span><span class="p">;</span>

 <span class="n">integers</span>  <span class="o">|</span>   <span class="n">varchars</span>
<span class="c1">-----------+---------------- </span>
 <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="o">|</span> <span class="p">[</span><span class="n">hello</span><span class="p">,</span> <span class="n">world</span><span class="p">]</span></code></pre></figure>


SQL array indexes are 1-based. Learn more about how to use and manipulate them
in this in-depth video.

<div class="container">
  <div class="row">
    <div class="col-md-6">
       <div class="embed-container">
    <iframe src="https://www.youtube.com/embed/HN_95ObHAiw?start=4067&amp;end=5214" width="350" height="240" frameborder="0" allowfullscreen="">
    </iframe>
  </div>
    </div>
    <div class="col-md-6">
      Topics:
      <ul>
        <li>Accessing array and map elements with <a href="https://docs.starburstdata.com/latest/functions/array.html#element_at">element_at()</a></li>
        <li>Sorting arrays with <a href="https://docs.starburstdata.com/latest/functions/array.html#array_sort">array_sort()</a></li>
        <li>matching elements with <a href="https://docs.starburstdata.com/latest/functions/array.html#any_match">any_match()</a>, <a href="https://docs.starburstdata.com/latest/functions/array.html#all_match">all_match()</a> and <a href="https://docs.starburstdata.com/latest/functions/array.html#none_match">none_match()</a></li>
        <li><a href="https://docs.starburstdata.com/latest/functions/array.html#filter">Filtering</a> elements</li>
        <li><a href="https://docs.starburstdata.com/latest/functions/array.html#transform">Transforming</a> elements</li>
        <li><a href="https://docs.starburstdata.com/latest/functions/array.html#array_join">Converting</a> arrays to strings</li>
        <li>Computing array <a href="https://docs.starburstdata.com/latest/functions/array.html#reduce">products</a></li>
        <li><a href="https://docs.starburstdata.com/latest/sql/select.html#unnest">Unnesting arrays and maps</a></li>
        <li>Creating maps from <a href="https://docs.starburstdata.com/latest/functions/map.html#map">keys and values</a> and <a href="https://docs.starburstdata.com/latest/functions/map.html#map_from_entries">an array of entry rows</a></li>
      </ul>
      <p class="caption">Running time: ~19 min.</p>
    </div>
  </div>
</div><hr />

### Using JSON with Presto

<div class="container">
  <div class="row">
    <div class="col-md-6">
       <div class="embed-container">
    <iframe src="https://www.youtube.com/embed/HN_95ObHAiw?start=1116&amp;end=1969" width="350" height="240" frameborder="0" allowfullscreen="">
    </iframe>
  </div>
    </div>
    <div class="col-md-6">
      Topics:
      <ul>
        <li>The <a href="https://docs.starburstdata.com/latest/functions/json.html">JSON</a> data type</li>
        <li>Extraction using <a href="https://docs.starburstdata.com/latest/functions/json.html#json_extract">json_extract()</a> and <a href="https://docs.starburstdata.com/latest/functions/json.html#json_extract_scalar">json_extract_scalar()</a></li>
        <li><a href="https://docs.starburstdata.com/latest/functions/json.html#cast-from-json">Casting and partial casting from JSON</a></li>
        <li><a href="https://docs.starburstdata.com/latest/functions/json.html#json_format">Formatting</a> as JSON</li>
      </ul>
      <p class="caption">Running time: ~14 min.</p>
    </div>
  </div>
</div><hr />
</a></a></li></ul></div></div></div>

        </div>
        <div class="col-md-3">
          <ul>
  <li><a href="#using-sql-in-presto">Using SQL in Presto</a>
    <ul>
      <li><a href="#the-basics">The basics</a>
        <ul>
          <li><a href="#catalogs">Catalogs</a></li>
          <li><a href="#fully-qualified-table-names">Fully qualified table names</a></li>
          <li><a href="#walkthrough-general-sql-features">Walkthrough: general SQL features</a></li>
        </ul>
      </li>
      <li><a href="#advanced-presto">Advanced Presto</a>
        <ul>
          <li><a href="#advanced-aggregation-techniques">Advanced aggregation techniques</a></li>
          <li><a href="#window-functions">Window functions</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

        </div>
    </div>
    <div style="margin-bottom:50px;"></div>
</div>
<footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-2">
        <p style="font-weight:900">Follow us</p>
        <ul>
          <li class="footer-item"><a href="https://twitter.com/starburstdata" target="_blank"><i class="fab fa-twitter fa-2x" style="color: white;"></i></a></li>
          <li class="footer-item"><a href="https://linkedin.com/starburstdata" target="_blank"><i class="fab fa-linkedin fa-2x" style="color: white;"></i></a></li>
          <li class="footer-item"><a href="https://www.youtube.com/channel/UCXjkuWSO9CV_cSI3Mvo4a4w" target="_blank"><i class="fab fa-youtube fa-2x" style="color: white;"></i></a></li>
          <li class="footer-item"><a href="https://github.com/starburstdata" target="_blank"><i class="fab fa-github fa-2x" style="color: white;"></i></a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <p style="font-weight:900">Resources</b></p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburstdata.com/latest/index.html" target="_blank">Starburst Enterprise Presto (SEP) reference documentation</a></li>
          <li class="footer-item"><a href="https://www.starburstdata.com/oreilly-presto-guide-download/" target="_blank">Free O'Reilly book - Presto: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://prestosql.io/broadcast/" target="_blank">Presto Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburstdata.com/weekly-demo-registration/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburstdata.com/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="https://starburstsupport.force.com/s/" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburstdata.com/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">
        <img src="/assets/img/logo/starburst-reverse.png" height="60" alt=" Starburst Universe" style="margin-bottom:20px;">
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright 2017 - 2020, Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</footer>


  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/popper.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
</body>
</html>
