<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Starburst Universe | Trying SEP with Docker</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Starburst Universe - Trying SEP with Docker">
    <meta property="og:description" content="Starburst Universe - your hub to all knowledge about Starburst products.">
    <meta property="og:image" content="/assets/img/logo/starburst-reverse.png">

    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/mdb.min.css">
    <link rel="stylesheet" href="/assets/css/highlight.css">
    <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>
<div class="wrap">
  <header style="padding-top:86px;">
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <a class="navbar-brand" href="/universe.html">
      <img src="/assets/img/logo/starburst-reverse.png" height="40" alt=" Starburst Universe">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/sep/index.html">Starburst Enterprise Presto</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/marketplace/index.html">Marketplace deployments</a>
        </li>
        <li class="nav-item">
          <a class="nav-link"  href="/about.html">About</a>
        </li>
      </ul>
    </div>
  </nav>
</header>

<div class="content">
  <div class="row">
    <div class="col-md-3 side-navigation">
      <div class="spacer-60 toc-sticky">
        
        <div>
    <h6 class="overline product-nav-title">Starburst Enterprise Presto</h6>
</div>
<hr />

 
<li >
  <a href="/sep/index.html" >SEP Overview</a>
</li>



 
<li ><a onclick="toggleMenu(this, '#admins');">Platform administrators <i class="fa fa-angle-down" style="float:right;"></i></a></li>
<ul id="admins" class="doc-subnav hidden">
  
  
  <li >
    <a href="/sep/platform-administrator/index.html" >Home</a>
  </li>
  
  
  
  <li >
    <a href="/sep/platform-administrator/cluster.html" >SEP clusters</a>
  </li>
  
  
  
  <li >
    <a href="/sep/platform-administrator/deploy-update.html" >Deploying and updating SEP</a>
  </li>
  
  
  
  <li >
    <a href="/sep/platform-administrator/performance-tuning.html" >Tuning cluster performance</a>
  </li>
  
  
  
  <li >
    <a href="/sep/platform-administrator/security.html" >Securing SEP</a>
  </li>
  
  
</ul>



 
<li ><a onclick="toggleMenu(this, '#engineers');">Data engineers <i class="fa fa-angle-down" style="float:right;"></i></a></li>
<ul id="engineers" class="doc-subnav hidden">
  
  
  <li >
    <a href="/sep/data-engineer/index.html" >Home</a>
  </li>
  
  
  
  <li >
    <a href="/sep/data-engineer/catalogs.html" >Catalogs</a>
  </li>
  
  
  
  <li >
    <a href="/sep/data-engineer/custom-connectors.html" >Custom connectors</a>
  </li>
  
  
  
  <li >
    <a href="/sep/data-engineer/query-performance.html" >Query performance</a>
  </li>
  
  
</ul>



 
<li >
  <a href="/data-consumer/index.html" >Data consumers</a>
</li>



 
<li class="active"><a onclick="toggleMenu(this, '#try');">Try SEP <i class="fa fa-angle-down" style="float:right;"></i></a></li>
<ul id="try" class="doc-subnav ">
  
  
  <li >
    <a href="/sep/try/index.html" >Overview</a>
  </li>
  
  
  
  <li >
    <a href="/sep/try/any-linux.html" >Any Linux</a>
  </li>
  
  
  
  <li class="active">
    <a href="/sep/try/docker.html" >Docker</a>
  </li>
  
  
  
  <li >
    <a href="/sep/try/k8s.html" >k8s</a>
  </li>
  
  
  
  <li >
    <a href="/sep/try/use-presto.html" >Use Presto</a>
  </li>
  
  
</ul>



        
      </div>
    </div>
    <div class="col-md-9 col-lg-6 spacer-30 docs-content">
      



<div class="breadcrumbs">
  <p>
  
  
    
      <a href="/sep/"
        style="text-transform: uppercase"
      > sep</a> >
    
  
    
      <a href="/sep/try/"
        style="text-transform: uppercase"
      > try</a> >
    
  
    
      Trying SEP with Docker
    
  </p>
</div>

      <h1 id="trying-sep-with-docker">
        
        
          Trying SEP with Docker <a href="#trying-sep-with-docker" class="titleAnchor">#</a>
        
        
      </h1>
    

<p>You can install Starburst Enterprise Presto (SEP) in a Docker container and run
it on any Docker host. This is especially useful as a test or demo environment
or to evaluate SEP.</p>

<p>With custom configuration of the containers for the SEP coordinator and worker
nodes, you can run a set of Docker containers to implement a SEP cluster
hosted on Linux on your local network or on a cloud provider.</p>

<div class="alert alert-info" role="alert">
  <i class="fa fa-info-circle"></i> <b>Note:</b>

  You can run SEP with Docker on Mac or Windows
 computers <em>for evaluation purposes only</em>. Understand that these are likely to
 be memory-limited devices that cannot run complex queries. A production
 implementation of a SEP cluster on Docker is supported only on Linux servers.

</div>

<p>This page presumes you have Docker installed and running, and presumes some
familiarity with Docker commands. For Mac and Windows evaluations, make sure you
have Docker Desktop installed and running.</p>
      <h2 id="initial-run-of-sep-on-docker">
        
        
          Initial run of SEP on Docker <a href="#initial-run-of-sep-on-docker" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Starburst Data provides a Docker image for a trial configuration of SEP on
Docker Hub. Use the following command to download and run this image:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-d</span> <span class="nt">-p</span> 8080:8080 <span class="nt">--name</span> presdock starburstdata/presto
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">docker run</code> options have the following meanings:</p>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">–d</code></td>
      <td>Detach</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">–p</code></td>
      <td>Map ports as <code class="language-plaintext highlighter-rouge">hostport:containerport</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">--name</code></td>
      <td>Provide a name for the image to use in subsequent Docker commands</td>
    </tr>
  </tbody>
</table>

<p>The default SEP image has the following characteristics:</p>

<ul>
  <li>There is <strong>no</strong> Presto CLI command installed in the Docker image</li>
  <li>The jvm.config is set to use 1G maximum</li>
  <li>The following catalogs are installed:
    <ul>
      <li>jmx</li>
      <li>memory</li>
      <li>system</li>
      <li>tpcds</li>
      <li>tpch</li>
    </ul>
  </li>
</ul>
      <h2 id="run-presto-cli-locally">
        
        
          Run Presto CLI locally <a href="#run-presto-cli-locally" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>To interact with the SEP server running in Docker, use the standard Presto CLI
tool on the Docker host. See <a href="/sep/try/any-linux#downloadcli">Download the Presto CLI JAR
file</a> to learn about downloading
and renaming the Presto CLI JAR file.</p>

<p>The <code class="language-plaintext highlighter-rouge">docker run</code> command mapped the SEP server’s default port running inside the
container to the same port on the host machine. This means you can use the host
machine’s <code class="language-plaintext highlighter-rouge">presto</code> command as-is:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>presto
</code></pre></div></div>

<p>At the <code class="language-plaintext highlighter-rouge">presto&gt;</code> prompt, enter <code class="language-plaintext highlighter-rouge">show catalogs;</code>. Then enter <code class="language-plaintext highlighter-rouge">quit;</code> or Control+D
to exit the CLI.</p>

<p>Next see <a href="/sep/try/use-presto">First steps with the Presto
CLI</a> to learn more about using the
Presto CLI.</p>
      <h2 id="use-a-local-etc-directory">
        
        
          Use a local etc directory <a href="#use-a-local-etc-directory" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>If you tried to run the <code class="language-plaintext highlighter-rouge">tpch-queries.sql</code> script described in the last section
of the <strong>First Steps</strong> page, you receive an error message:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Catalog does not exist: blackhole
</code></pre></div></div>

<p>The set of catalogs provided with the default Docker image does not include a
catalog for the Black Hole connector. This raises the question of how to
customize SEP running in the Docker image.</p>

<p>Starburst does <strong>not</strong> recommend going into the Docker image to change
configuration files there. Those changes would be lost the next time Starburst
updated the public Docker image to a new version, which your next <code class="language-plaintext highlighter-rouge">docker run</code>
command would download and use.</p>

<p>Instead, there is a way to map the <code class="language-plaintext highlighter-rouge">etc</code> directory used by SEP-in-Docker to a
local directory. Once configured, SEP uses the local <code class="language-plaintext highlighter-rouge">etc</code> directory as its
primary source of configuration files, and ignores the default settings in the
Docker image.</p>

<p>To do this requires one extra <code class="language-plaintext highlighter-rouge">docker run</code> option. First stop and remove the
currently running Docker image:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker images stop presdock
docker images <span class="nb">rm </span>presdock
</code></pre></div></div>

<p>Create a local directory to contain your custom SEP configuration files. For
example:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/presdock
</code></pre></div></div>
      <h2 id="populate-the-local-etc-directory">
        
        
          Populate the local etc directory <a href="#populate-the-local-etc-directory" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Even the simplest SEP server must have a minimum set of configuration files
before it can start.</p>

<p>The simplest way to get started quickly is to use the set of configuration files
provided as examples for the O’Reilly book <a href="https://www.starburstdata.com/oreilly-presto-guide-download/">Presto: The Definitive
Guide</a>. Download
these samples from their <a href="https://github.com/prestosql/presto-the-definitive-guide">GitHub
location</a> either as a
zip file or a git clone.</p>

<p>From your unzip or clone location of these samples, copy the entire <code class="language-plaintext highlighter-rouge">etc</code>
directory from the <code class="language-plaintext highlighter-rouge">single-installation</code> sample to your <code class="language-plaintext highlighter-rouge">~/presdock</code>
directory. For example:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;unzip-or-clone-of-Def-Guide-samples&gt;/single-installation
rsync <span class="nt">-av</span> etc ~/presdock/
</code></pre></div></div>
      <h2 id="edit-local-configuration-files">
        
        
          Edit local configuration files <a href="#edit-local-configuration-files" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Navigate to your local <code class="language-plaintext highlighter-rouge">etc</code> directory. For example:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/presdock/etc
</code></pre></div></div>

<p>Inspect the configuration files provided there for suitability with Docker. For
example, the <code class="language-plaintext highlighter-rouge">jvm.config</code> file sets <code class="language-plaintext highlighter-rouge">-mx16G</code>, which might be too large for
Docker running on Docker Desktop on Mac or Windows. Set that to a lower value
such as <code class="language-plaintext highlighter-rouge">-mx5G</code>.</p>

<div class="alert alert-info" role="alert">
  <i class="fa fa-info-circle"></i> <b>Note:</b>

  Make sure Docker is configured to use enough
memory to handle the <code class="language-plaintext highlighter-rouge">-mx</code> setting you choose for SEP. For example, Docker
Desktop’s default RAM setting is 2G. Change Docker Desktop to use 6G to allow
large queries to run in the Docker image. Adjust these numbers as appropriate
for your environment.

</div>
      <h2 id="invoke-docker-run-with-local-etc-directory">
        
        
          Invoke docker run with local etc directory <a href="#invoke-docker-run-with-local-etc-directory" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>The <code class="language-plaintext highlighter-rouge">docker run</code> command has another useful option:</p>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">‑‑volume</code></td>
      <td>Specify a directory in the container to mount to a host directory</td>
    </tr>
  </tbody>
</table>

<p>The syntax for the <code class="language-plaintext highlighter-rouge">‑‑volume</code> option is:</p>

<p><code class="language-plaintext highlighter-rouge">localPath:containerPath:options</code></p>

<p>Specify <em>localPath</em> first, followed by <em>containerPath</em>, separated by a colon. No
<em>options</em> are needed. Options are described in <a href="https://docs.docker.com/storage/volumes/#choose-the--v-or---mount-flag">Docker
documentation</a>.</p>

<p>Next, restart the Docker image, this time including a <code class="language-plaintext highlighter-rouge">‑‑volume</code> option that
maps the current directory, <code class="language-plaintext highlighter-rouge">~/presdock/etc</code> to the <code class="language-plaintext highlighter-rouge">etc</code> directory inside the
Docker image, <code class="language-plaintext highlighter-rouge">/usr/lib/presto/etc</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-d</span> <span class="nt">-p</span> 8080:8080 <span class="nt">--volume</span> <span class="nv">$PWD</span>:/usr/lib/presto/etc <span class="nt">--name</span> presdock starburstdata/presto
</code></pre></div></div>

<p>Connect the Presto CLI to SEP running in Docker, and run the <code class="language-plaintext highlighter-rouge">show catalogs;</code>
command again. This time you see that the list includes the <code class="language-plaintext highlighter-rouge">blackhole</code>
catalog.</p>

<p>Exit from the interactive CLI, navigate to the unzip or clone directory of the
<em>Definitive Guide</em> samples, and invoke the following command line scripts:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;unzip-or-clone-of-Def-Guide-samples&gt;/tpch
presto <span class="nt">-f</span> nations.sql
presto <span class="nt">--file</span><span class="o">=</span>tpch-queries.sql
</code></pre></div></div>

<p>To run the second script more than once, you must stop and restart the SEP
server because of a limitation in the Black Hole connector:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker container restart presdock
</code></pre></div></div>
      <h2 id="configure-custom-data-sources-and-options">
        
        
          Configure custom data sources and options <a href="#configure-custom-data-sources-and-options" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>The external <code class="language-plaintext highlighter-rouge">etc</code> directory illustrated on this page allows you to continue to
add and configure the catalogs and features you need to connect to your data
sources of interest.</p>

    </div>
    <div class="col-lg-3 toc-styles d-none d-lg-block">
      <div class="spacer-60 toc-sticky">
        <ul><li><a href="#trying-sep-with-docker">Trying SEP with Docker</a><ul><li><a href="#initial-run-of-sep-on-docker">Initial run of SEP on Docker</a></li><li><a href="#run-presto-cli-locally">Run Presto CLI locally</a></li><li><a href="#use-a-local-etc-directory">Use a local etc directory</a></li><li><a href="#populate-the-local-etc-directory">Populate the local etc directory</a></li><li><a href="#edit-local-configuration-files">Edit local configuration files</a></li><li><a href="#invoke-docker-run-with-local-etc-directory">Invoke docker run with local etc directory</a></li><li><a href="#configure-custom-data-sources-and-options">Configure custom data sources and options</a></li></ul></li></ul>

      </div>
    </div>
</div>
</div>
<footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <p style="font-weight:900">Resources</b></p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburstdata.com/latest/index.html" target="_blank">SEP reference documentation</a></li>
          <li class="footer-item"><a href="https://www.starburstdata.com/oreilly-presto-guide-download/" target="_blank">Free O'Reilly book - Presto: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://prestosql.io/broadcast/" target="_blank">Presto Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburstdata.com/weekly-demo-registration/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburstdata.com/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="https://starburstsupport.force.com/s/" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburstdata.com/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-4" style="text-align:right;">
        <img src="/assets/img/logo/starburst-reverse.png" height="60" alt=" Starburst Universe" style="margin-bottom:20px;">
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2020, Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 center spacer-30">
          <a href="https://twitter.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-twitter"></i></a>
          <a href="https://linkedin.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.youtube.com/channel/UCXjkuWSO9CV_cSI3Mvo4a4w" target="_blank" class="footer-icon"><i class="fab fa-youtube"></i></a>
          <a href="https://github.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </div>
</footer>


  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/popper.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
</body>
</html>