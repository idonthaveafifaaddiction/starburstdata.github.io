

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Starburst Hive MapR Connector &mdash; Starburst Enterprise Presto</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="9. Connectors" href="../connector.html"/>
        <link rel="next" title="Starburst Delta Lake Connector" href="starburst-delta-lake.html"/>
        <link rel="prev" title="IBM Cloud Object Storage Support for the Hive Connector" href="starburst-hive-ibm-cos.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">3. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">5. Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">6. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">7. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">8. Query Optimizer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../connector.html">9. Connectors</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../connector.html#starburst-connectors-and-connector-extensions">9.1. Starburst Connectors and Connector Extensions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="starburst-connectors.html">Starburst Connectors Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-db2.html">Starburst DB2 Connector (license required)</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-generic-jdbc.html">Starburst Generic JDBC Connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-hive.html">Starburst Hive Connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-hive-security.html">Starburst Hive Connector Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-hive-azurestorage.html">Azure Storage Support for the Hive Connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-hive-ibm-cos.html">IBM Cloud Object Storage Support for the Hive Connector</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Starburst Hive MapR Connector (license required)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mapr-specific-configuration-properties">MapR-specific Configuration Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unsupported-configuration-properties">Unsupported Configuration Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="starburst-delta-lake.html">Starburst Delta Lake Connector (license required)</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-kafka.html">Starburst Kafka Connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-mysql.html">Starburst MySQL Connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-oracle.html">Starburst Oracle Connector (license required)</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-postgresql.html">Starburst PostgreSQL Connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-snowflake.html">Starburst Snowflake Connector (license required)</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-sqlserver.html">Starburst SQL Server Connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-teradata.html">Starburst Teradata Connector (license required)</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-teradata-parallel-direct.html">Starburst Teradata Parallel Direct Connector (license required)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../connector.html#presto-connectors">9.2. Presto Connectors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">10. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">11. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">12. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">13. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">14. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">15. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">16. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">332-e.1 and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../connector.html">9. Connectors</a> &raquo;</li>
      
    <li>Starburst Hive MapR Connector</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="starburst-hive-mapr-connector">
<h1>Starburst Hive MapR Connector<a class="headerlink" href="#starburst-hive-mapr-connector" title="Permalink to this headline">#</a></h1>
<p>The Hive MapR connector allows querying data stored in a Hive data warehouse on
a MapR cluster. The connector is based on the Hive Connector, see the
<a class="reference internal" href="hive.html"><span class="doc">Hive Connector</span></a> documentation for information about supported file types
and generic configuration properties.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#configuration" id="id2">Configuration</a><ul>
<li><a class="reference internal" href="#mapr-sasl-authentication" id="id3">MapR SASL Authentication</a></li>
<li><a class="reference internal" href="#impersonation" id="id4">Impersonation</a></li>
<li><a class="reference internal" href="#volumes" id="id5">Volumes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapr-specific-configuration-properties" id="id6">MapR-specific Configuration Properties</a></li>
<li><a class="reference internal" href="#unsupported-configuration-properties" id="id7">Unsupported Configuration Properties</a></li>
<li><a class="reference internal" href="#limitations" id="id8">Limitations</a></li>
</ul>
</div>
<div class="section" id="configuration">
<h2><a class="toc-backref" href="#id2">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">#</a></h2>
<p>The Hive MapR connector supports MapR 6 clusters, using MapR SASL
authentication.</p>
<p>Create <code class="docutils literal"><span class="pre">etc/catalog/hive.properties</span></code> with the following contents
to mount the <code class="docutils literal"><span class="pre">hive-mapr</span></code> connector as the <code class="docutils literal"><span class="pre">hive</span></code> catalog,
replacing <code class="docutils literal"><span class="pre">example.net:9083</span></code> with the correct host and port
for your Hive metastore Thrift service:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>connector.name=hive-mapr
hive.metastore.uri=thrift://example.net:9083
</pre></div>
</div>
<p>MapR client libraries need to be installed and configured separately on each
node running Presto. Please refer to <a class="reference external" href="https://mapr.com/docs/">MapR documentation</a> for MapR Client installation instructions specific
for your environment.</p>
<div class="section" id="mapr-sasl-authentication">
<h3><a class="toc-backref" href="#id3">MapR SASL Authentication</a><a class="headerlink" href="#mapr-sasl-authentication" title="Permalink to this headline">#</a></h3>
<p>MapR SASL authentication is supported for both MapR Filesystem and the Hive
metastore.  The authentication is based on MapR ticket file and is enabled by
default.  MapR ticket search path is the following:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">/opt/mapr/conf/maprserverticket</span></code> (or <code class="docutils literal"><span class="pre">${MAPR_HOME}/conf/maprserverticket</span></code>
when <code class="docutils literal"><span class="pre">MAPR_HOME</span></code> environment variable is set),</li>
<li>location defined by <code class="docutils literal"><span class="pre">MAPR_TICKETFILE_LOCATION</span></code> environment variable (if it
is set),</li>
<li><code class="docutils literal"><span class="pre">/tmp/maprticket_${UID}</span></code> where <code class="docutils literal"><span class="pre">${UID}</span></code> is replaced with user id of the
OS user executing Presto process (applicable when <code class="docutils literal"><span class="pre">MAPR_TICKETFILE_LOCATION</span></code>
environment variable is not set).</li>
</ul>
</div>
<div class="section" id="impersonation">
<h3><a class="toc-backref" href="#id4">Impersonation</a><a class="headerlink" href="#impersonation" title="Permalink to this headline">#</a></h3>
<p>The connector supports impersonation for both MapR Filesystem and the Hive
metastore.  Impersonation is disabled by default. You can enable impersonation
using <code class="docutils literal"><span class="pre">hive.metastore.impersonation-enabled=true</span></code>,
<code class="docutils literal"><span class="pre">hive.maprfs.impersonation.enabled=true</span></code> properties.</p>
<p>When enabling impersonation make sure that the MapR ticket used by Presto
allows impersonation. The ticket should be of <code class="docutils literal"><span class="pre">servicewithimpersonation</span></code>
type. Ticket type can be verified using <code class="docutils literal"><span class="pre">maprlogin</span> <span class="pre">print</span> <span class="pre">-ticketfile</span>
<span class="pre">path/to/ticket/file</span></code> command.</p>
<p>Additionally, Presto service user must be allowed to impersonate users in Hive
Metastore. Typically, this is achieved by setting
<code class="docutils literal"><span class="pre">hadoop.proxyuser.mapr.groups</span></code> and <code class="docutils literal"><span class="pre">hadoop.proxyuser.mapr.hosts</span></code> properties
to appropriate values in <code class="docutils literal"><span class="pre">core-site.xml</span></code> on the node running Metastore.
Please refer to <a class="reference external" href="https://mapr.com/docs/">MapR documentation</a> for detailed
instructions.</p>
</div>
<div class="section" id="volumes">
<h3><a class="toc-backref" href="#id5">Volumes</a><a class="headerlink" href="#volumes" title="Permalink to this headline">#</a></h3>
<p>Typically, your MapR Filesystem is divided into multiple volumes. Presto
creates temporary files when writing data to Hive tables backed by the MapR
Filesystem (this is similar to “scratch directory” in Hive). It is strongly
recommended to use a temporary staging directory that is on the same volume as
the tables being written to, otherwise data needs to be written twice (once to
the staging directory and then copied to the destination directory).</p>
<p>The temporary staging directory location can be configured using
<code class="docutils literal"><span class="pre">&lt;catalog&gt;.temporary_staging_directory_path</span></code> session property or
<code class="docutils literal"><span class="pre">hive.temporary-staging-directory-path</span></code> configuration property. The
<code class="docutils literal"><span class="pre">${USER}</span></code> placeholder can be used to use a different location for each user.</p>
<p>If you enable the MapR Filesystem impersonation in Presto, make sure the
impersonated user has read and write permission to the selected location.
<code class="docutils literal"><span class="pre">/user/${USER}/tmp/presto</span></code> is the recommended staging directory location when
using impersonation. If you do not enable MapR Filesystem impersonation in
Presto, make sure the Presto service user has read and write permission to the
selected location. When impersonation is disabled,
<code class="docutils literal"><span class="pre">/user/presto/tmp/presto-${USER}</span></code> is the recommended staging directory
location.</p>
</div>
</div>
<div class="section" id="mapr-specific-configuration-properties">
<h2><a class="toc-backref" href="#id6">MapR-specific Configuration Properties</a><a class="headerlink" href="#mapr-specific-configuration-properties" title="Permalink to this headline">#</a></h2>
<p>See <a class="reference internal" href="hive.html"><span class="doc">Hive Connector</span></a> general configuration properties. Configuration properties
specific to Hive MapR are documented below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="49%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Description</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">hive.metastore.authentication.type</span></code></td>
<td>Hive metastore authentication type.
Possible values are <code class="docutils literal"><span class="pre">NONE</span></code> or <code class="docutils literal"><span class="pre">MAPR_SASL</span></code>.</td>
<td><code class="docutils literal"><span class="pre">MAPR_SASL</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">hive.metastore.impersonation-enabled</span></code></td>
<td>Enable Metastore end user impersonation.</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">hive.maprfs.impersonation.enabled</span></code></td>
<td>Enable MapR Filesystem end user impersonation.</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="unsupported-configuration-properties">
<h2><a class="toc-backref" href="#id7">Unsupported Configuration Properties</a><a class="headerlink" href="#unsupported-configuration-properties" title="Permalink to this headline">#</a></h2>
<p>Certain Hive connector configuration are not supported in Hive MapR connector:</p>
<ul class="simple">
<li>Kerberos-specific properties,</li>
<li><code class="docutils literal"><span class="pre">hive.hdfs.*</span></code>.</li>
</ul>
</div>
<div class="section" id="limitations">
<h2><a class="toc-backref" href="#id8">Limitations</a><a class="headerlink" href="#limitations" title="Permalink to this headline">#</a></h2>
<p>The following functionalities have not yet been certified by Starburst when used
in combination with the Hive MapR connector:</p>
<ul class="simple">
<li>Apache Sentry integration,</li>
<li>Apache Ranger integration,</li>
<li>Azure Storage support.</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="starburst-delta-lake.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="Starburst Delta Lake Connector" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="starburst-hive-ibm-cos.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="IBM Cloud Object Storage Support for the Hive Connector" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'332',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>