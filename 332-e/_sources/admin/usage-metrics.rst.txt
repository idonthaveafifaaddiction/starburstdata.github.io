=============
Usage Metrics
=============

Usage metrics collection enables Presto to log information about all nodes in
the cluster. This feature is mostly used for :doc:`Mission Control
</mission-control>` and other management solutions. Users can use the resulting
log information for their own monitoring and operational purposes.

.. contents::
    :local:

Configuration
-------------

Usage metrics collection is configured by a number of properties, that you can
add in ``etc/config.properties`` to disable it or configure details.

.. list-table:: Usage Tracking Configuration Properties
  :widths: 15, 70, 15
  :header-rows: 1

  * - Property name
    - Description
    - Default value
  * - ``usage-tracking.log.enabled``
    - Toggle to enable or disable usage tracking
    - true
  * - ``usage-tracking.log.path``
    - Base path of the usage log files
    - var/log/presto/usage-tracking.log
  * - ``usage-tracking.log.max-size``
    - Maximum size of a single usage log file
    - 100 MB, minimum 1MB
  * - ``usage-tracking.log.max-history``
    - Maximum number of usage log files
    - 1000
  * - ``usage-tracking.cloud-watch-logs-directory``
    - Path to the directory in which log files are stored and can be picked up  
      by the Amazon Cloud Watch system, if used.
    - 
  * - ``usage-tracking.gathering.initial-delay``
    - The initial delay to before tracking usage, allowing the cluster to start
      up before tracking starts.
    - 1 min
  * - ``usage-tracking.gathering.interval``
    - Length of the interval between usage tracking log entry creation.
    - 1 min
  * - ``usage-tracking.gatherer-threads``
    - Number of threads used to gather and write all usage information.
    - 100, minimum 10

Logging Details
---------------

The logged information includes details about number of nodes, number of cores,
start time, cpu time, and other data about the cluster and nodes in the
cluster. The log uses JSON format for each entry.
