==============================
Starburst MySQL Connector
==============================

The Starburst MySQL Connector is an extended version of the
:doc:`/connector/mysql` with configuration and usage identical.

The following improvements are included: 

.. contents::
  :local:

Table Statistics
----------------

MySQL connector supports table and column statistics, as documented in
:doc:`/optimizer/statistics`. The table-level statistics are based on MySQL's
``INFORMATION_SCHEMA.TABLES`` table. The column-level statistics are based on
MySQL's index statistics ``INFORMATION_SCHEMA.STATISTICS`` table. The connector
can return column-level statistics only when the column is the first column in
some index.

MySQL Database can automatically update its table and index statistics. In some
cases, you may want to force statistics update (e.g. after creating new index or
after changing data in the table). You can do that by executing the following
statement in MySQL Database.

.. code-block:: none

    ANALYZE TABLE table_name;

The table and column statistics can be viewed in Presto using :doc:`/sql/show-stats`
and are used for :doc:`/optimizer/cost-based-optimizations`.

.. note::

    MySQL and Presto may use statistics information in different ways. For this
    reason, the accuracy of table and column statistics returned by the MySQL
    connector might be lower than than that of others connectors.

Improving Statistics Accuracy
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

You can improve statistics accuracy with histogram statistics (available since
MySQL 8.0). To create histogram statistics execute the following statement in
MySQL Database.

.. code-block:: none

    ANALYZE TABLE table_name UPDATE HISTOGRAM ON column_name1, column_name2, ...;

Please refer to MySQL documentation for information about options, limitations
and additional considerations.

.. list-table:: Table Statistics Configuration Properties
  :widths: 15, 80, 5
  :header-rows: 1

  * - Property Name
    - Description
    - Default
  * - ``statistics.enabled``
    - Enables table and column statistics.
    - ``true``
  * - ``statistics.cache-ttl``
    - Duration for which table and column statistics are cached.
    - ``0s``
  * - ``statistics.cache-missing``
    - Cache the fact that table statistics are not available.
    - ``false``
