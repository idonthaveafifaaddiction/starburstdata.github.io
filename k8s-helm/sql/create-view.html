

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>14.12. CREATE VIEW &mdash; Starburst Enterprise Presto</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="14. SQL Statement Syntax" href="../sql.html"/>
        <link rel="next" title="14.13. DEALLOCATE PREPARE" href="deallocate-prepare.html"/>
        <link rel="prev" title="14.11. CREATE TABLE AS" href="create-table-as.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">4. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">5. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">6. Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">7. Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">8. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">9. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">10. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">11. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">12. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">13. SQL Language</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../sql.html">14. SQL Statement Syntax</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="alter-schema.html">14.1. ALTER SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="alter-table.html">14.2. ALTER TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="alter-view.html">14.3. ALTER VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="analyze.html">14.4. ANALYZE</a></li>
<li class="toctree-l2"><a class="reference internal" href="call.html">14.5. CALL</a></li>
<li class="toctree-l2"><a class="reference internal" href="comment.html">14.6. COMMENT</a></li>
<li class="toctree-l2"><a class="reference internal" href="commit.html">14.7. COMMIT</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-role.html">14.8. CREATE ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-schema.html">14.9. CREATE SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-table.html">14.10. CREATE TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-table-as.html">14.11. CREATE TABLE AS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">14.12. CREATE VIEW</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deallocate-prepare.html">14.13. DEALLOCATE PREPARE</a></li>
<li class="toctree-l2"><a class="reference internal" href="delete.html">14.14. DELETE</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe.html">14.15. DESCRIBE</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe-input.html">14.16. DESCRIBE INPUT</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe-output.html">14.17. DESCRIBE OUTPUT</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-role.html">14.18. DROP ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-schema.html">14.19. DROP SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-table.html">14.20. DROP TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-view.html">14.21. DROP VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="execute.html">14.22. EXECUTE</a></li>
<li class="toctree-l2"><a class="reference internal" href="explain.html">14.23. EXPLAIN</a></li>
<li class="toctree-l2"><a class="reference internal" href="explain-analyze.html">14.24. EXPLAIN ANALYZE</a></li>
<li class="toctree-l2"><a class="reference internal" href="grant.html">14.25. GRANT</a></li>
<li class="toctree-l2"><a class="reference internal" href="grant-roles.html">14.26. GRANT ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="insert.html">14.27. INSERT</a></li>
<li class="toctree-l2"><a class="reference internal" href="prepare.html">14.28. PREPARE</a></li>
<li class="toctree-l2"><a class="reference internal" href="reset-session.html">14.29. RESET SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="revoke.html">14.30. REVOKE</a></li>
<li class="toctree-l2"><a class="reference internal" href="revoke-roles.html">14.31. REVOKE ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="rollback.html">14.32. ROLLBACK</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html">14.33. SELECT</a></li>
<li class="toctree-l2"><a class="reference internal" href="set-role.html">14.34. SET ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="set-session.html">14.35. SET SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-catalogs.html">14.36. SHOW CATALOGS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-columns.html">14.37. SHOW COLUMNS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-create-schema.html">14.38. SHOW CREATE SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-create-table.html">14.39. SHOW CREATE TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-create-view.html">14.40. SHOW CREATE VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-functions.html">14.41. SHOW FUNCTIONS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-grants.html">14.42. SHOW GRANTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-role-grants.html">14.43. SHOW ROLE GRANTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-roles.html">14.44. SHOW ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-schemas.html">14.45. SHOW SCHEMAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-session.html">14.46. SHOW SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-stats.html">14.47. SHOW STATS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-tables.html">14.48. SHOW TABLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="start-transaction.html">14.49. START TRANSACTION</a></li>
<li class="toctree-l2"><a class="reference internal" href="use.html">14.50. USE</a></li>
<li class="toctree-l2"><a class="reference internal" href="values.html">14.51. VALUES</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">15. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">16. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">17. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">18. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e.0 LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/338-e/">Latest LTS (338-e)</option>
    <option value="/332-e/">332-e LTS</option>
    <option value="/323-e/">323-e LTS</option>
    <option value="/339-e/">Latest STS (339-e)</option>
    <option value="/336-e/">336-e STS</option>
    <option value="/334-e/">334-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e.0 LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../sql.html"><span class="section-number">14. </span>SQL Statement Syntax</a> &raquo;</li>
      
    <li><span class="section-number">14.12. </span>CREATE VIEW</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="create-view">
<h1><span class="section-number">14.12. </span>CREATE VIEW<a class="headerlink" href="#create-view" title="Permalink to this headline">#</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CREATE [ OR REPLACE ] VIEW view_name
[ SECURITY { DEFINER | INVOKER } ]
AS query
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">#</a></h2>
<p>Create a new view of a <a class="reference internal" href="select.html"><span class="doc">SELECT</span></a> query. The view is a logical table
that can be referenced by future queries. Views do not contain any data.
Instead, the query stored by the view is executed every time the view is
referenced by another query.</p>
<p>The optional <code class="docutils literal notranslate"><span class="pre">OR</span> <span class="pre">REPLACE</span></code> clause causes the view to be replaced if it
already exists rather than raising an error.</p>
</div>
<div class="section" id="security">
<h2>Security<a class="headerlink" href="#security" title="Permalink to this headline">#</a></h2>
<p>In the default <code class="docutils literal notranslate"><span class="pre">DEFINER</span></code> security mode, tables referenced in the view
are accessed using the permissions of the view owner (the <em>creator</em> or
<em>definer</em> of the view) rather than the user executing the query. This
allows providing restricted access to the underlying tables, for which
the user may not be allowed to access directly.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">INVOKER</span></code> security mode, tables referenced in the view are accessed
using the permissions of the user executing the query (the <em>invoker</em> of the view).
A view created in this mode is simply a stored query.</p>
<p>Regardless of the security mode, the <code class="docutils literal notranslate"><span class="pre">current_user</span></code> function will
always return the user executing the query and thus may be used
within views to filter out rows or otherwise restrict access.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h2>
<p>Create a simple view <code class="docutils literal notranslate"><span class="pre">test</span></code> over the <code class="docutils literal notranslate"><span class="pre">orders</span></code> table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">test</span> <span class="k">AS</span>
<span class="k">SELECT</span> <span class="n">orderkey</span><span class="p">,</span> <span class="n">orderstatus</span><span class="p">,</span> <span class="n">totalprice</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">AS</span> <span class="n">half</span>
<span class="k">FROM</span> <span class="n">orders</span>
</pre></div>
</div>
<p>Create a view <code class="docutils literal notranslate"><span class="pre">orders_by_date</span></code> that summarizes <code class="docutils literal notranslate"><span class="pre">orders</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">orders_by_date</span> <span class="k">AS</span>
<span class="k">SELECT</span> <span class="n">orderdate</span><span class="p">,</span> <span class="k">sum</span><span class="p">(</span><span class="n">totalprice</span><span class="p">)</span> <span class="k">AS</span> <span class="n">price</span>
<span class="k">FROM</span> <span class="n">orders</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">orderdate</span>
</pre></div>
</div>
<p>Create a view that replaces an existing view:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">VIEW</span> <span class="n">test</span> <span class="k">AS</span>
<span class="k">SELECT</span> <span class="n">orderkey</span><span class="p">,</span> <span class="n">orderstatus</span><span class="p">,</span> <span class="n">totalprice</span> <span class="o">/</span> <span class="mi">4</span> <span class="k">AS</span> <span class="n">quarter</span>
<span class="k">FROM</span> <span class="n">orders</span>
</pre></div>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">#</a></h2>
<p><a class="reference internal" href="drop-view.html"><span class="doc">DROP VIEW</span></a>, <a class="reference internal" href="show-create-view.html"><span class="doc">SHOW CREATE VIEW</span></a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="deallocate-prepare.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="14.13. DEALLOCATE PREPARE" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="create-table-as.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="14.11. CREATE TABLE AS" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>