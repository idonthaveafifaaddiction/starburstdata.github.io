

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>14.16. Kinesis Connector &mdash; Starburst Distribution of Presto 323-e.2 Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Distribution of Presto 323-e.2 Documentation" href="../index.html"/>
        <link rel="up" title="14. Connectors" href="../connector.html"/>
        <link rel="next" title="14.17. Kudu Connector" href="kudu.html"/>
        <link rel="prev" title="14.15. Kafka Connector Tutorial" href="kafka-tutorial.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Distribution of Presto
          

          
          </a>

          
            
            
              <div class="version">
                323-e.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system-requirements.html">2. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">3. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">4. Running Presto in a Docker container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">5. Presto on Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure.html">6. Presto on Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">7. Presto on Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation-rpm.html">8. Presto RPM Installation using Presto Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/deployment.html">9. Presto Tarball Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">10. Presto Client Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">11. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">12. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">13. Query Optimizer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../connector.html">14. Connectors</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="accumulo.html">14.1. Accumulo Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="alluxio.html">14.2. Alluxio Data Orchestrator</a></li>
<li class="toctree-l2"><a class="reference internal" href="blackhole.html">14.3. Black Hole Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="bigquery.html">14.4. BigQuery Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra.html">14.5. Cassandra Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="db2.html">14.6. IBM DB2 Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="elasticsearch.html">14.7. Elasticsearch Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="googlesheets.html">14.8. Google Sheets Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive.html">14.9. Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-gcs-tutorial.html">14.10. Hive Connector GCS Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-security.html">14.11. Hive Security Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-mapr.html">14.12. Hive MapR Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="jmx.html">14.13. JMX Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka.html">14.14. Kafka Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka-tutorial.html">14.15. Kafka Connector Tutorial</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">14.16. Kinesis Connector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-properties">Configuration Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-access-key"><code class="docutils literal notranslate"><span class="pre">kinesis.access-key</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-secret-key"><code class="docutils literal notranslate"><span class="pre">kinesis.secret-key</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-aws-region"><code class="docutils literal notranslate"><span class="pre">kinesis.aws-region</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-default-schema"><code class="docutils literal notranslate"><span class="pre">kinesis.default-schema</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-table-description-dir"><code class="docutils literal notranslate"><span class="pre">kinesis.table-description-dir</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-table-descriptions-s3"><code class="docutils literal notranslate"><span class="pre">kinesis.table-descriptions-s3</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-batch-size"><code class="docutils literal notranslate"><span class="pre">kinesis.batch-size</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-max-batches"><code class="docutils literal notranslate"><span class="pre">kinesis.max-batches</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-fetch-attempts"><code class="docutils literal notranslate"><span class="pre">kinesis.fetch-attempts</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-sleep-time"><code class="docutils literal notranslate"><span class="pre">kinesis.sleep-time</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-iterator-from-timestamp"><code class="docutils literal notranslate"><span class="pre">kinesis.iterator-from-timestamp</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-iterator-offset-seconds"><code class="docutils literal notranslate"><span class="pre">kinesis.iterator-offset-seconds</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-hide-internal-columns"><code class="docutils literal notranslate"><span class="pre">kinesis.hide-internal-columns</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#internal-columns">Internal Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-definition">Table Definition</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kudu.html">14.17. Kudu Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="localfile.html">14.18. Local File Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">14.19. Memory Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb.html">14.20. MongoDB Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mysql.html">14.21. MySQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="oracle.html">14.22. Oracle Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="phoenix.html">14.23. Phoenix Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql.html">14.24. PostgreSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis.html">14.25. Redis Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redshift.html">14.26. Redshift Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="snowflake.html">14.27. Snowflake Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="sqlserver.html">14.28. SQL Server Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic-jdbc.html">14.29. Generic JDBC Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="system.html">14.30. System Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="teradata.html">14.31. Teradata Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="teradata-parallel-direct.html">14.32. Teradata Parallel Direct Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="thrift.html">14.33. Thrift Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="tpcds.html">14.34. TPCDS Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="tpch.html">14.35. TPCH Connector</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">15. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">16. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">17. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">18. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">19. Older Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">20. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">21. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Starburst Distribution of Presto</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../connector.html">14. Connectors</a> &raquo;</li>
      
    <li>14.16. Kinesis Connector</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/connector/kinesis.rst.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kinesis-connector">
<h1>14.16. Kinesis Connector</h1>
<p>Kinesis is Amazon’s fully managed cloud-based service for real-time processing of large, distributed data streams.</p>
<p>This connector allows the use of Kinesis streams as tables in Presto, such that each data-blob (message)
in a Kinesis stream is presented as a row in Presto. A flexible table mapping approach lets us
treat fields of the messages as columns in the table.</p>
<p>Under the hood, a Kinesis
<a class="reference external" href="https://docs.aws.amazon.com/kinesis/latest/APIReference/API_GetShardIterator.html">shard iterator</a>
is used to retrieve the records, along with a series of
<a class="reference external" href="https://docs.aws.amazon.com/kinesis/latest/APIReference/API_GetRecords.html">GetRecords</a> calls.
The shard iterator starts by default 24 hours before the current time and works its way forward.
To be able to query a stream, table mappings are needed. These table definitions can be
stored on Amazon S3 (preferred) or stored in a local directory on each Presto node.</p>
<p>This connector is a read-only connector. It can only fetch data from Kinesis streams,
but cannot create streams or push data into existing streams.</p>
<p>To configure the Kinesis connector, create a catalog properties file <code class="docutils literal notranslate"><span class="pre">etc/catalog/kinesis.properties</span></code>
with the following contents, replacing the properties as appropriate:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>connector.name=kinesis
kinesis.access-key=XXXXXX
kinesis.secret-key=XXXXXX
</pre></div>
</div>
<div class="section" id="configuration-properties">
<h2>Configuration Properties</h2>
<p>The following configuration properties are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">kinesis.access-key</span></code></td>
<td>Access key to aws account or blank to use default provider chain</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">kinesis.secret-key</span></code></td>
<td>Secret key to aws account or blank to use default provider chain</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">kinesis.aws-region</span></code></td>
<td>AWS region to be used to read kinesis stream from</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">kinesis.default-schema</span></code></td>
<td>Default schema name for tables</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">kinesis.table-description-dir</span></code></td>
<td>Directory containing table description files</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">kinesis.table-descriptions-s3</span></code></td>
<td>Amazon S3 bucket URL with table description files</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">kinesis.hide-internal-columns</span></code></td>
<td>Controls whether internal columns are part of the table schema or not</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">kinesis.batch-size</span></code></td>
<td>Maximum number of records to return in one batch</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">kinesis.fetch-attempts</span></code></td>
<td>Read attempts made when no records returned and not caught up</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">kinesis.max-batches</span></code></td>
<td>Maximum batches to read from Kinesis in one single query</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">kinesis.sleep-time</span></code></td>
<td>Time for thread to sleep waiting to make next attempt to fetch batch</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">kinesis.iter-from-timestamp</span></code></td>
<td>Begin iterating from a given timestamp instead of the trim horizon</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">kinesis.iter-offset-seconds</span></code></td>
<td>Number of seconds before current time to start iterating</td>
</tr>
</tbody>
</table>
<div class="section" id="kinesis-access-key">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.access-key</span></code></h3>
<p>Defines the access key ID for AWS root account or IAM roles, which is used to sign programmatic requests to AWS Kinesis.</p>
<p>This property is optional; if not defined, connector will try to follow <code class="docutils literal notranslate"><span class="pre">Default-Credential-Provider-Chain</span></code> provided by AWS in the following order:</p>
<ul class="simple">
<li>Environment Variable: Load credentials from environment variables <code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code> and <code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code>.</li>
<li>Java System Variable: Load from java system as <code class="docutils literal notranslate"><span class="pre">aws.accessKeyId</span></code> and <code class="docutils literal notranslate"><span class="pre">aws.secretKey</span></code>.</li>
<li>Profile Credentials File: Load from file typically located at <code class="docutils literal notranslate"><span class="pre">~/.aws/credentials</span></code>.</li>
<li>Instance profile credentials: These credentials can be used on EC2 instances, and are delivered through the Amazon EC2 metadata service.</li>
</ul>
</div>
<div class="section" id="kinesis-secret-key">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.secret-key</span></code></h3>
<p>Defines the secret key for AWS root account or IAM roles, which together with Access Key ID, is used to sign programmatic requests to AWS Kinesis.</p>
<p>This property is optional; if not defined, connector will try to follow <code class="docutils literal notranslate"><span class="pre">Default-Credential-Provider-Chain</span></code> same as above.</p>
</div>
<div class="section" id="kinesis-aws-region">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.aws-region</span></code></h3>
<p>Defines AWS Kinesis regional endpoint. Selecting appropriate region may reduce latency in fetching data.</p>
<p>This field is optional; The default region is <code class="docutils literal notranslate"><span class="pre">us-east-1</span></code> referring to end point ‘kinesis.us-east-1.amazonaws.com’.</p>
<p>See <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/rande.html#ak_region">Kinesis Data Streams regions</a>
for a current list of available regions.</p>
</div>
<div class="section" id="kinesis-default-schema">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.default-schema</span></code></h3>
<p>Defines the schema which will contain all tables that were defined without a qualifying schema name.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p>
</div>
<div class="section" id="kinesis-table-description-dir">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.table-description-dir</span></code></h3>
<p>References a folder within Presto deployment that holds one or more JSON files (must end with <code class="docutils literal notranslate"><span class="pre">.json</span></code>) which contain table description files.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">etc/kinesis</span></code>.</p>
</div>
<div class="section" id="kinesis-table-descriptions-s3">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.table-descriptions-s3</span></code></h3>
<p>An S3 URL giving the location of the JSON table description files. When this is given, S3 will be used as
the source of table description files and <code class="docutils literal notranslate"><span class="pre">kinesis.table-description-dir</span></code> is ignored. The S3 bucket and folder will
be checked every 10 minutes for updates and changed files.</p>
<p>This property is optional; by default, <code class="docutils literal notranslate"><span class="pre">kinesis.table-description-dir</span></code> will be the source of the table definitions.</p>
</div>
<div class="section" id="kinesis-batch-size">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.batch-size</span></code></h3>
<p>Defines maximum number of records to return in one request to Kinesis Streams. Maximum limit is <code class="docutils literal notranslate"><span class="pre">10000</span></code> records.</p>
<p>This field is optional; the default value is <code class="docutils literal notranslate"><span class="pre">10000</span></code>.</p>
</div>
<div class="section" id="kinesis-max-batches">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.max-batches</span></code></h3>
<p>The maximum number of batches to read in a single query. The default value is <code class="docutils literal notranslate"><span class="pre">1000</span></code>.</p>
</div>
<div class="section" id="kinesis-fetch-attempts">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.fetch-attempts</span></code></h3>
<p>Defines number of attempts made to read a batch from Kinesis Streams when no records are returned and the <em>millis behind latest</em>
parameter shows we are not yet caught up. When records are returned no additional attempts are necessary.
<code class="docutils literal notranslate"><span class="pre">GetRecords</span></code> has been observed to return no records even though the shard is not empty.
That is why multiple attempts need to be made.</p>
<p>This field is optional; the default value is <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
</div>
<div class="section" id="kinesis-sleep-time">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.sleep-time</span></code></h3>
<p>Defines the duration for which a thread needs to sleep between <code class="docutils literal notranslate"><span class="pre">kinesis.fetch-attempts</span></code> made to fetch data.</p>
<p>This field is optional; the default value is <code class="docutils literal notranslate"><span class="pre">1000ms</span></code>.</p>
</div>
<div class="section" id="kinesis-iterator-from-timestamp">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.iterator-from-timestamp</span></code></h3>
<p>Use an initial shard iterator type of <code class="docutils literal notranslate"><span class="pre">AT_TIMESTAMP</span></code> starting <code class="docutils literal notranslate"><span class="pre">kinesis.iterator-offset-seconds</span></code> before the current time.
When this is false, an iterator type of <code class="docutils literal notranslate"><span class="pre">TRIM_HORIZON</span></code> will be used, meaning it will start from the oldest record in the stream.</p>
<p>The default is true.</p>
</div>
<div class="section" id="kinesis-iterator-offset-seconds">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.iterator-offset-seconds</span></code></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">kinesis.iterator-from-timestamp</span></code> is true, the shard iterator will start at <code class="docutils literal notranslate"><span class="pre">kinesis.iter-offset-seconds</span></code> before the current time.</p>
<p>The default is <code class="docutils literal notranslate"><span class="pre">86400</span></code> seconds (24 hours).</p>
</div>
<div class="section" id="kinesis-hide-internal-columns">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.hide-internal-columns</span></code></h3>
<p>In addition to the data columns defined in a table description file, the connector maintains a number of additional columns for each table.
If these columns are hidden, they can still be used in queries but do not show up in <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span> <span class="pre">&lt;table-name&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code>.</p>
<p>This property is optional; the default is true.</p>
</div>
</div>
<div class="section" id="internal-columns">
<h2>Internal Columns</h2>
<p>For each defined table, the connector maintains the following columns:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="11%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Column name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">_shard_id</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></td>
<td>ID of the Kinesis stream shard which contains this row.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">_shard_sequence_id</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></td>
<td>Sequence id within the Kinesis shard for this row.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">_segment_start</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></td>
<td>Lowest offset in the segment (inclusive) which contains this row.
This offset is partition specific.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">_segment_end</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></td>
<td>Highest offset in the segment (exclusive) which contains this row.
The offset is partition specific.
This is the same value as <code class="docutils literal notranslate"><span class="pre">_segment_start</span></code> of the next segment (if it exists).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">_segment_count</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></td>
<td>Running count for the current row within the segment. For an uncompacted topic,
<code class="docutils literal notranslate"><span class="pre">_segment_start</span> <span class="pre">+</span> <span class="pre">_segment_count</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">_partition_offset</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">_message_valid</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></td>
<td>True if the decoder could decode the message successfully for this row.
When false, data columns mapped from the message should be treated as invalid.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">_message</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></td>
<td>Message bytes as an UTF-8 encoded string. This is only useful for a text topic.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">_message_length</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></td>
<td>Number of bytes in the message.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">_message_timestamp</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></td>
<td>Approximate arrival time of the message (milliseconds granularity).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">_key</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></td>
<td>Key bytes as an UTF-8 encoded string. This is only useful for textual keys.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">_partition_key</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></td>
<td>Partition Key bytes as a UTF-8 encoded string.</td>
</tr>
</tbody>
</table>
<p>For tables without a table definition file, the <code class="docutils literal notranslate"><span class="pre">_message_valid</span></code> column will always be true.</p>
</div>
<div class="section" id="table-definition">
<h2>Table Definition</h2>
<p>A table definition file consists of a JSON definition for a table, which corresponds to one stream in Kinesis.
The name of the file can be arbitrary but must end in <code class="docutils literal notranslate"><span class="pre">.json</span></code>. The structure of the table definition is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
      &quot;tableName&quot;: ...,
      &quot;schemaName&quot;: ...,
      &quot;key&quot;: {
          &quot;dataFormat&quot;: ...,
          &quot;fields&quot;: [
              ...
          ]
      },
      &quot;value&quot;: {
          &quot;dataFormat&quot;: ...,
          &quot;fields&quot;: [
              ...
         ]
      }
  }
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="7%" />
<col width="10%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Required</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">tableName</span></code></td>
<td>required</td>
<td>string</td>
<td>Presto table name defined by this file.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">schemaName</span></code></td>
<td>optional</td>
<td>string</td>
<td>Schema which will contain the table. If omitted, the default schema name is used.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">streamName</span></code></td>
<td>required</td>
<td>string</td>
<td>Name of the Kinesis Stream that is mapped</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">message</span></code></td>
<td>optional</td>
<td>JSON object</td>
<td>Field definitions for data columns mapped to the message itself.</td>
</tr>
</tbody>
</table>
<p>Every message in a Kinesis stream can be decoded using the definition provided in the message object.
The JSON object message in the table definition contains two fields:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="6%" />
<col width="9%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Required</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code></td>
<td>required</td>
<td>string</td>
<td>Selects the decoder for this group of fields.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">fields</span></code></td>
<td>required</td>
<td>JSON array</td>
<td>A list of field definitions. Each field definition creates a new column in the Presto table.</td>
</tr>
</tbody>
</table>
<p>Each field definition is a JSON object. At a minimum, a name, type, and mapping must be provided.
The overall structure looks like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;name&quot;: ...,
    &quot;type&quot;: ...,
    &quot;dataFormat&quot;: ...,
    &quot;mapping&quot;: ...,
    &quot;formatHint&quot;: ...,
    &quot;hidden&quot;: ...,
    &quot;comment&quot;: ...
}
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="7%" />
<col width="9%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Required</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">name</span></code></td>
<td>required</td>
<td>string</td>
<td>Name of the column in the Presto table.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">type</span></code></td>
<td>required</td>
<td>string</td>
<td>Presto type of the column.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code></td>
<td>optional</td>
<td>string</td>
<td>Selects the column decoder for this field. Defaults to
the default decoder for this row data format and column type.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">mapping</span></code></td>
<td>optional</td>
<td>string</td>
<td>Mapping information for the column. This is decoder specific – see below.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">formatHint</span></code></td>
<td>optional</td>
<td>string</td>
<td>Sets a column specific format hint to the column decoder.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">hidden</span></code></td>
<td>optional</td>
<td>boolean</td>
<td>Hides the column from <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span> <span class="pre">&lt;table</span> <span class="pre">name&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">comment</span></code></td>
<td>optional</td>
<td>string</td>
<td>Adds a column comment which is shown with <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span> <span class="pre">&lt;table</span> <span class="pre">name&gt;</span></code>.</td>
</tr>
</tbody>
</table>
<p>The name field is exposed to Presto as the column name, while the mapping field is the portion of the message that gets
mapped to that column. For JSON object messages, this refers to the field name of an object, and can be a path that drills
into the object structure of the message. Additionally, you can map a field of the JSON object to a string column type,
and if it is a more complex type (JSON array or JSON object) then the JSON itself will become the field value.</p>
<p>There is no limit on field descriptions for either key or message.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="kudu.html" class="btn btn-neutral float-right" title="14.17. Kudu Connector" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="kafka-tutorial.html" class="btn btn-neutral" title="14.15. Kafka Connector Tutorial" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'323-e.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>