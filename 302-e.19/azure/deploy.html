

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.2. Deploying Presto &mdash; Starburst Distribution of Presto 302-e.19 Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Distribution of Presto 302-e.19 Documentation" href="../index.html"/>
        <link rel="up" title="5. Presto on Microsoft Azure" href="../azure.html"/>
        <link rel="next" title="5.3. Configuring Presto" href="configuration.html"/>
        <link rel="prev" title="5.1. Overview of Presto on Azure" href="overview.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Distribution of Presto
          

          
          </a>

          
            
            
              <div class="version">
                302-e.19
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system-requirements.html">2. License and System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">3. Running Presto in a Docker container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Presto 302e on Amazon Web Services</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../azure.html">5. Presto on Microsoft Azure</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">5.1. Overview of Presto on Azure</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.2. Deploying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">5.3. Configuring Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="access.html">5.4. Accessing the Presto Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html">5.5. Querying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="azurestorage.html">5.6. Querying Azure Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="secondarystorage.html">5.7. Secondary and Additional Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="scriptactions.html">5.8. Script Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="superset.html">5.9. Using Apache Superset</a></li>
<li class="toctree-l2"><a class="reference internal" href="scaling.html">5.10. Scaling a Running Presto Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">5.11. Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="uninstall.html">5.12. Uninstalling Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="resources.html">5.13. Related Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gcp.html">6. Presto on Google Cloud Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation-rpm.html">7. Presto RPM Installation using Presto Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/deployment.html">8. Presto Tarball Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">9. Presto Client Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">10. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">11. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">12. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">13. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">14. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">15. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">16. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">17. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">18. Older Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">19. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">20. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Starburst Distribution of Presto</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../azure.html">5. Presto on Microsoft Azure</a> &raquo;</li>
      
    <li>5.2. Deploying Presto</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/azure/deploy.rst.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deploying-presto">
<h1>5.2. Deploying Presto</h1>
<p>Presto is deployed as an application on a Azure HDInsight Hadoop cluster. This section will document deploying the HDInsight cluster with Presto using the Azure Portal. Microsoft provides general instructions for <a class="reference external" href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-hadoop-provision-linux-clusters">deploying an HDInsight</a> cluster that you should familiarize yourself beforehand as well. Creating the HDInsight cluster will take between 20 to 30 minutes.</p>
<p><strong>1. Select HDInsight</strong></p>
<p>In the Azure portal, select Create a resource &gt; Analytics &gt; HDInsight.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/deploy_select_hdi.png"><img alt="../_images/deploy_select_hdi.png" src="../_images/deploy_select_hdi.png" style="width: 586.0px; height: 839.0px;" /></a>
</div></blockquote>
<p><strong>2. Chose Custom Setup</strong></p>
<p>Select Custom (size, settings app)</p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/deploy_custom.png"><img alt="../_images/deploy_custom.png" src="../_images/deploy_custom.png" style="width: 318.0px; height: 679.0px;" /></a>
</div></blockquote>
<p><strong>3. Select HDInsight Basics</strong></p>
<p>In the Basics tab, enter the values based on the following description.</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Cluster Name</td>
<td>Enter the name you want your Presto cluster.</td>
</tr>
<tr class="row-even"><td>Subscriptions</td>
<td>Select your Azure subscription.</td>
</tr>
<tr class="row-odd"><td>Cluster Type</td>
<td>Choose “Hadoop” version 2.7 (HDI 3.6). We do not support
Hadoop 3.1.0 (HDI 4.0 Preview). Also do not select
Enterprise Security Package as Presto does not currently
support this.</td>
</tr>
<tr class="row-even"><td>Cluster login username</td>
<td>Enter the cluster login username.
The default user name is admin.</td>
</tr>
<tr class="row-odd"><td>Cluster login password.</td>
<td>Enter the cluster login password.</td>
</tr>
<tr class="row-even"><td>SSH username</td>
<td>Enter the SSH username. The default user is sshuser.</td>
</tr>
<tr class="row-odd"><td>Use same password as custer login</td>
<td>Select this checkbox to use the same password as the one used
for the cluster login user.</td>
</tr>
<tr class="row-even"><td>Resource Group</td>
<td>Create a resource group or select an existing resource group.</td>
</tr>
<tr class="row-odd"><td>Location</td>
<td>Select the Azure location to create the cluster.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/deploy_basics.png"><img alt="../_images/deploy_basics.png" src="../_images/deploy_basics.png" style="width: 631.0px; height: 813.0px;" /></a>
<a class="reference internal image-reference" href="../_images/deploy_cluster_type.png"><img alt="../_images/deploy_cluster_type.png" src="../_images/deploy_cluster_type.png" style="width: 585.0px; height: 217.0px;" /></a>
</div></blockquote>
<p>Once you’ve completed entering in the values in the Basics tab, click Next.</p>
<p><strong>4. Select Storage</strong></p>
<p>In the Storage tab, enter the Storage Account Settings. See <a class="reference internal" href="secondarystorage.html"><span class="doc">Secondary Storage</span></a> options for more information.</p>
<p>For Azure Standard Blob Storage:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Primary Storage Type</td>
<td>Select Azure Storage -  Azure Storage
Supported options: Azure Storage and Azure Datalake Storage Gen2.</td>
</tr>
<tr class="row-even"><td>Selection Method</td>
<td>Keep the default selection of “My Subscriptions” unless it is
desired to access data from another subscription.</td>
</tr>
<tr class="row-odd"><td>Select a Storage Account.</td>
<td>Select an existing or create a new Storage Account.</td>
</tr>
<tr class="row-even"><td>Default Container</td>
<td>Specify an existing or create a new Container for the HDInsight.
cluster to use.</td>
</tr>
<tr class="row-odd"><td>Additional Storage Accounts</td>
<td>Select Additional Storage accounts.
See <a class="reference internal" href="secondarystorage.html"><span class="doc">Secondary Storage</span></a> for supported
functionality.</td>
</tr>
<tr class="row-even"><td>Data Lake Store Access</td>
<td>We do not support accessing ADLS Gen1. This option appears only
for Primary storage types Azure Storage and Azure Datalake Storage
Gen1.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/deploy_storage.png"><img alt="../_images/deploy_storage.png" src="../_images/deploy_storage.png" style="width: 630.0px; height: 812.0px;" /></a>
</div></blockquote>
<p>For Azure Datalake Storage Gen2:</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Primary Storage Type</td>
<td>Select Azure Storage - Azure Datalake Storage Gen2
Supported options: Azure Storage and Azure Datalake Storage Gen2.</td>
</tr>
<tr class="row-even"><td>Select a Storage Account.</td>
<td>Select an existing ADLS Gen2 Storage Account.</td>
</tr>
<tr class="row-odd"><td>Filesystem</td>
<td>Specify an existing or create a new Filesystem (analogous to
Container) for the HDInsight cluster to use.</td>
</tr>
<tr class="row-even"><td>Additional Storage Accounts</td>
<td>Select Additional Storage accounts.
See <a class="reference internal" href="secondarystorage.html"><span class="doc">Secondary Storage</span></a> for supported
functionality.</td>
</tr>
<tr class="row-odd"><td>Subscription</td>
<td>Keep the default selection of subscription for the storage account.</td>
</tr>
<tr class="row-even"><td>User-assigned Managed Identity</td>
<td>Select the identity with access to the storage accounts used.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/deploy_storage_gen2.png"><img alt="../_images/deploy_storage_gen2.png" src="../_images/deploy_storage_gen2.png" style="width: 1218.0px; height: 1266.0px;" /></a>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The storage accounts used must have appropriate <code class="docutils literal"><span class="pre">Access</span> <span class="pre">Control</span> <span class="pre">(IAM)</span></code> set for the user-assigned managed identity configured, like in the screenshot below. Refer <a class="reference external" href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview">documentation</a> for more information about User-assigned Managed Identity.</p>
<a class="last reference internal image-reference" href="../_images/user_managed_identity.png"><img alt="../_images/user_managed_identity.png" src="../_images/user_managed_identity.png" style="width: 1242.0px; height: 262.0px;" /></a>
</div>
<p><strong>5. Configuring the Metastore</strong></p>
<p>Still in the Storage tab, you can configure using a custom Metastore. This step is optional and assumes you have a Metastore already configured. Microsoft provides documentation for configuring an <a class="reference external" href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-use-external-metadata-stores?toc=%2Fen-us%2Fazure%2Fhdinsight%2Fhadoop%2FTOC.json&amp;bc=%2Fen-us%2Fazure%2Fbread%2Ftoc.json#custom-metastore">custom Metastore for HDInsight</a>. The primary advantage allows the metadata to persist even after a cluster is deleted and recreated.</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Select a SQL database for Hive</td>
<td>Choose the external database that will be used.</td>
</tr>
<tr class="row-even"><td>Authenticate SQL Database</td>
<td>Enter the SQL Database username and password to authenticate.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/deploy_configure_metastore.png"><img alt="../_images/deploy_configure_metastore.png" src="../_images/deploy_configure_metastore.png" style="width: 309.0px; height: 234.0px;" /></a>
</div></blockquote>
<p>Once you’ve completed entering in the values in the Storage tab, click Next.</p>
<p><strong>6. Select Starburst Presto Application</strong></p>
<p>From the list of available applications, select Starburst Presto on Azure HDInsight.
Click “Review Legal Terms” and then click Create to agree to those terms.
Click Ok and then click Next to complete the selection of Starburst Presto.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/deploy_presto_application.png"><img alt="../_images/deploy_presto_application.png" src="../_images/deploy_presto_application.png" style="width: 764.0px; height: 443.0px;" /></a>
</div></blockquote>
<p><strong>7. Configure Cluster Size</strong></p>
<p>Starburst Presto is installed on a Hadoop Cluster. The Presto Coordinator is installed on one of the two HDInsight Head Nodes and the Presto Workers are installed on the variable number of HDInsight Worker Nodes.</p>
<p>The Presto command line interface (CLI) and Apache Superset is installed on an HDInsight Edge Node.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Number of Worker Nodes.</td>
<td>Enter the number of Worker nodes for the cluster.
This number usually depends on your workload size
and may require resizing.</td>
</tr>
<tr class="row-even"><td>Worker and Head node size Select the node sizes.</td>
<td>We recommend you choose the same size type.
See Recommended Node sizes for more information.</td>
</tr>
<tr class="row-odd"><td>Starburst Presto on Azure HDInsight node size.</td>
<td>Keep the default select Edge Node size for the
Presto Application. This node does not run Presto
itself so it does not need to be the same as the
Head and Worker node sizes.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/deploy_cluster_size.png"><img alt="../_images/deploy_cluster_size.png" src="../_images/deploy_cluster_size.png" style="width: 629.0px; height: 430.0px;" /></a>
</div></blockquote>
<p>Once you’ve made your selection, click Next.</p>
<p><strong>8. Advanced Settings</strong></p>
<p>Starburst provides Script Actions for modifying the Presto cluster. But these are applied after cluster creating so we will skip this for now. See <a class="reference internal" href="scriptactions.html"><span class="doc">Script Actions</span></a> for more information.</p>
<p><strong>9. Virtual Network</strong></p>
<p>This is optional. Microsoft provides documentation about <a class="reference external" href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-hadoop-provision-linux-clusters#advanced-settings-extend-clusters-with-a-virtual-network">extending the cluster with a virtual network</a></p>
<p>Click Next.</p>
<p><strong>10. Summary and Create</strong></p>
<p>The summary tab provides the description of everything you entered in the previous step. Review and make sure that Starburst Presto is listed as an application. Once you are satisfied with the settings click “Create.” Creating the HDInsight cluster will take between 20 to 30 minutes.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/deploy_summary.png"><img alt="../_images/deploy_summary.png" src="../_images/deploy_summary.png" style="width: 898.0px; height: 812.0px;" /></a>
</div></blockquote>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configuration.html" class="btn btn-neutral float-right" title="5.3. Configuring Presto" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="5.1. Overview of Presto on Azure" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'302-e.19',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>