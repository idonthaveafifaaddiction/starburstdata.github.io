

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>15.22. EXPLAIN ANALYZE &mdash; Starburst Distribution of Presto 302-e.19 Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Distribution of Presto 302-e.19 Documentation" href="../index.html"/>
        <link rel="up" title="15. SQL Statement Syntax" href="../sql.html"/>
        <link rel="next" title="15.23. GRANT" href="grant.html"/>
        <link rel="prev" title="15.21. EXPLAIN" href="explain.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Distribution of Presto
          

          
          </a>

          
            
            
              <div class="version">
                302-e.19
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system-requirements.html">2. License and System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">3. Running Presto in a Docker container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Presto 302e on Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure.html">5. Presto on Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gcp.html">6. Presto on Google Cloud Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation-rpm.html">7. Presto RPM Installation using Presto Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/deployment.html">8. Presto Tarball Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">9. Presto Client Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">10. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">11. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">12. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">13. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">14. SQL Language</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../sql.html">15. SQL Statement Syntax</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="alter-schema.html">15.1. ALTER SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="alter-table.html">15.2. ALTER TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="analyze.html">15.3. ANALYZE</a></li>
<li class="toctree-l2"><a class="reference internal" href="call.html">15.4. CALL</a></li>
<li class="toctree-l2"><a class="reference internal" href="commit.html">15.5. COMMIT</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-role.html">15.6. CREATE ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-schema.html">15.7. CREATE SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-table.html">15.8. CREATE TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-table-as.html">15.9. CREATE TABLE AS</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-view.html">15.10. CREATE VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="deallocate-prepare.html">15.11. DEALLOCATE PREPARE</a></li>
<li class="toctree-l2"><a class="reference internal" href="delete.html">15.12. DELETE</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe.html">15.13. DESCRIBE</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe-input.html">15.14. DESCRIBE INPUT</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe-output.html">15.15. DESCRIBE OUTPUT</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-role.html">15.16. DROP ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-schema.html">15.17. DROP SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-table.html">15.18. DROP TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-view.html">15.19. DROP VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="execute.html">15.20. EXECUTE</a></li>
<li class="toctree-l2"><a class="reference internal" href="explain.html">15.21. EXPLAIN</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">15.22. EXPLAIN ANALYZE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="grant.html">15.23. GRANT</a></li>
<li class="toctree-l2"><a class="reference internal" href="grant-roles.html">15.24. GRANT ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="insert.html">15.25. INSERT</a></li>
<li class="toctree-l2"><a class="reference internal" href="prepare.html">15.26. PREPARE</a></li>
<li class="toctree-l2"><a class="reference internal" href="reset-session.html">15.27. RESET SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="revoke.html">15.28. REVOKE</a></li>
<li class="toctree-l2"><a class="reference internal" href="revoke-roles.html">15.29. REVOKE ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="rollback.html">15.30. ROLLBACK</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html">15.31. SELECT</a></li>
<li class="toctree-l2"><a class="reference internal" href="set-role.html">15.32. SET ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="set-session.html">15.33. SET SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-catalogs.html">15.34. SHOW CATALOGS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-columns.html">15.35. SHOW COLUMNS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-create-table.html">15.36. SHOW CREATE TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-create-view.html">15.37. SHOW CREATE VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-functions.html">15.38. SHOW FUNCTIONS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-grants.html">15.39. SHOW GRANTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-role-grants.html">15.40. SHOW ROLE GRANTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-roles.html">15.41. SHOW ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-schemas.html">15.42. SHOW SCHEMAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-session.html">15.43. SHOW SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-stats.html">15.44. SHOW STATS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-tables.html">15.45. SHOW TABLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="start-transaction.html">15.46. START TRANSACTION</a></li>
<li class="toctree-l2"><a class="reference internal" href="use.html">15.47. USE</a></li>
<li class="toctree-l2"><a class="reference internal" href="values.html">15.48. VALUES</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">16. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">17. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">18. Older Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">19. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">20. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Starburst Distribution of Presto</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../sql.html">15. SQL Statement Syntax</a> &raquo;</li>
      
    <li>15.22. EXPLAIN ANALYZE</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/sql/explain-analyze.rst.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="explain-analyze">
<h1>15.22. EXPLAIN ANALYZE</h1>
<div class="section" id="synopsis">
<h2>Synopsis</h2>
<div class="highlight-none"><div class="highlight"><pre><span></span>EXPLAIN ANALYZE [VERBOSE] statement
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description</h2>
<p>Execute the statement and show the distributed execution plan of the statement
along with the cost of each operation.</p>
<p>The <code class="docutils literal"><span class="pre">VERBOSE</span></code> option will give more detailed information and low-level statistics;
understanding these may require knowledge of Presto internals and implementation details.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The stats may not be entirely accurate, especially for queries that complete quickly.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples</h2>
<p>In the example below, you can see the CPU time spent in each stage, as well as the relative
cost of each plan node in the stage. Note that the relative cost of the plan nodes is based on
wall time, which may or may not be correlated to CPU time. For each plan node you can see
some additional statistics (e.g: average input per node instance, average number of hash collisions for
relevant plan nodes). Such statistics are useful when one wants to detect data anomalies for a query
(skewness, abnormal hash collisions).</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>presto:sf1&gt; EXPLAIN ANALYZE SELECT count(*), clerk FROM orders WHERE orderdate &gt; date &#39;1995-01-01&#39; GROUP BY clerk;

                                          Query Plan
-----------------------------------------------------------------------------------------------
Fragment 1 [HASH]
    Cost: CPU 88.57ms, Input: 4000 rows (148.44kB), Output: 1000 rows (28.32kB)
    Output layout: [count, clerk]
    Output partitioning: SINGLE []
    - Project[] =&gt; [count:bigint, clerk:varchar(15)]
            Cost: 26.24%, Input: 1000 rows (37.11kB), Output: 1000 rows (28.32kB), Filtered: 0.00%
            Input avg.: 62.50 lines, Input std.dev.: 14.77%
        - Aggregate(FINAL)[clerk][$hashvalue] =&gt; [clerk:varchar(15), $hashvalue:bigint, count:bigint]
                Cost: 16.83%, Output: 1000 rows (37.11kB)
                Input avg.: 250.00 lines, Input std.dev.: 14.77%
                count := &quot;count&quot;(&quot;count_8&quot;)
            - LocalExchange[HASH][$hashvalue] (&quot;clerk&quot;) =&gt; clerk:varchar(15), count_8:bigint, $hashvalue:bigint
                    Cost: 47.28%, Output: 4000 rows (148.44kB)
                    Input avg.: 4000.00 lines, Input std.dev.: 0.00%
                - RemoteSource[2] =&gt; [clerk:varchar(15), count_8:bigint, $hashvalue_9:bigint]
                        Cost: 9.65%, Output: 4000 rows (148.44kB)
                        Input avg.: 4000.00 lines, Input std.dev.: 0.00%

Fragment 2 [tpch:orders:1500000]
    Cost: CPU 14.00s, Input: 818058 rows (22.62MB), Output: 4000 rows (148.44kB)
    Output layout: [clerk, count_8, $hashvalue_10]
    Output partitioning: HASH [clerk][$hashvalue_10]
    - Aggregate(PARTIAL)[clerk][$hashvalue_10] =&gt; [clerk:varchar(15), $hashvalue_10:bigint, count_8:bigint]
            Cost: 4.47%, Output: 4000 rows (148.44kB)
            Input avg.: 204514.50 lines, Input std.dev.: 0.05%
            Collisions avg.: 5701.28 (17569.93% est.), Collisions std.dev.: 1.12%
            count_8 := &quot;count&quot;(*)
        - ScanFilterProject[table = tpch:tpch:orders:sf1.0, originalConstraint = (&quot;orderdate&quot; &gt; &quot;$literal$date&quot;(BIGINT &#39;9131&#39;)), filterPredicate = (&quot;orderdate&quot; &gt; &quot;$literal$date&quot;(BIGINT &#39;9131&#39;))] =&gt; [cler
                Cost: 95.53%, Input: 1500000 rows (0B), Output: 818058 rows (22.62MB), Filtered: 45.46%
                Input avg.: 375000.00 lines, Input std.dev.: 0.00%
                $hashvalue_10 := &quot;combine_hash&quot;(BIGINT &#39;0&#39;, COALESCE(&quot;$operator$hash_code&quot;(&quot;clerk&quot;), 0))
                orderdate := tpch:orderdate
                clerk := tpch:clerk
</pre></div>
</div>
<p>When the <code class="docutils literal"><span class="pre">VERBOSE</span></code> option is used, some operators may report additional information.
For example, the window function operator will output the following:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>EXPLAIN ANALYZE VERBOSE SELECT count(clerk) OVER() FROM orders WHERE orderdate &gt; date &#39;1995-01-01&#39;;

                                          Query Plan
-----------------------------------------------------------------------------------------------
  ...
         - Window[] =&gt; [clerk:varchar(15), count:bigint]
                 Cost: {rows: ?, bytes: ?}
                 CPU fraction: 75.93%, Output: 8130 rows (230.24kB)
                 Input avg.: 8130.00 lines, Input std.dev.: 0.00%
                 Active Drivers: [ 1 / 1 ]
                 Index size: std.dev.: 0.00 bytes , 0.00 rows
                 Index count per driver: std.dev.: 0.00
                 Rows per driver: std.dev.: 0.00
                 Size of partition: std.dev.: 0.00
                 count := count(&quot;clerk&quot;)
 ...
</pre></div>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also</h2>
<p><a class="reference internal" href="explain.html"><span class="doc">EXPLAIN</span></a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="grant.html" class="btn btn-neutral float-right" title="15.23. GRANT" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="explain.html" class="btn btn-neutral" title="15.21. EXPLAIN" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'302-e.19',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>