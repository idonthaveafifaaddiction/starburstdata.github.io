

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="253746">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Apache Ranger Overview &#8212; Starburst Enterprise Presto</title>
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/presto.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="System level security with Apache Ranger" href="system-ranger.html" />
    <link rel="prev" title="Starburst Hive connector security" href="starburst-hive-security.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#security/ranger-overview" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Starburst Enterprise Presto"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise Presto logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise Presto</span>
          <span class="md-header-nav__topic"> Apache Ranger Overview </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (338-e)" href="/338-e/">Latest LTS (338-e)</a>
      
          <a title="332-e LTS" href="/332-e/">332-e LTS</a>
      
          <a title="323-e LTS" href="/323-e/">323-e LTS</a>
      
          <a title="Latest STS (344-e)" href="/344-e/">Latest STS (344-e)</a>
      
          <a title="343-e STS" href="/343-e/">343-e STS</a>
      
          <a title="341-e STS" href="/341-e/">341-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../security.html" class="md-tabs__link">Security</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise Presto" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise Presto">Starburst Enterprise Presto</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Amazon Web Services</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Kubernetes with Helm</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../kubernetes.html" class="md-nav__link">Kubernetes operator</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="server.html" class="md-nav__link">Kerberos authentication for coordinator</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cli.html" class="md-nav__link">Kerberos authentication with CLI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ldap.html" class="md-nav__link">LDAP authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="password-file.html" class="md-nav__link">Password file authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="salesforce.html" class="md-nav__link">Salesforce authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="user-mapping.html" class="md-nav__link">User mapping</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tls.html" class="md-nav__link">Java keystores and truststores</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="built-in-system-access-control.html" class="md-nav__link">Built-in system access control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ldap-group-provider.html" class="md-nav__link">LDAP group provider</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="secrets.html" class="md-nav__link">Secrets</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internal-communication.html" class="md-nav__link">Secure internal communication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="audit.html" class="md-nav__link">Query audit</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="event-logger.html" class="md-nav__link">Event logger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive-security.html" class="md-nav__link">Starburst Hive connector security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Apache Ranger Overview </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Apache Ranger Overview</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-ranger-overview--page-root" class="md-nav__link">Apache Ranger Overview</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#getting-the-most-out-of-apache-ranger" class="md-nav__link">Getting the most out of Apache Ranger</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#system-level-security-requirements-info-needed" class="md-nav__link">System-level security requirements - INFO NEEDED</a>
        </li>
        <li class="md-nav__item"><a href="#when-to-drop-back-to-hive-level-security-instead-info-needed" class="md-nav__link">When to drop back to Hive-level security instead - INFO NEEDED</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#important-concepts" class="md-nav__link">Important Concepts</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#resource-and-privilege-relationship" class="md-nav__link">Resource and privilege relationship</a>
        </li>
        <li class="md-nav__item"><a href="#policies" class="md-nav__link">Policies</a>
        </li>
        <li class="md-nav__item"><a href="#resource-sets" class="md-nav__link">Resource sets</a>
        </li>
        <li class="md-nav__item"><a href="#privilege-sets" class="md-nav__link">Privilege sets</a>
        </li>
        <li class="md-nav__item"><a href="#denying-access-to-specific-tables-and-columns" class="md-nav__link">Denying access to specific tables and columns</a>
        </li>
        <li class="md-nav__item"><a href="#column-level-authorization" class="md-nav__link">Column level authorization</a>
        </li>
        <li class="md-nav__item"><a href="#role-management-limitations" class="md-nav__link">Role management limitations</a>
        </li>
        <li class="md-nav__item"><a href="#authorization-limitations" class="md-nav__link">Authorization limitations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#additional-features" class="md-nav__link">Additional features</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#column-masking" class="md-nav__link">Column masking</a>
        </li>
        <li class="md-nav__item"><a href="#caching" class="md-nav__link">Caching</a>
        </li>
        <li class="md-nav__item"><a href="#ranger-audit" class="md-nav__link">Ranger Audit</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#audit" class="md-nav__link">Audit</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#controlling-access-to-user-defined-functions-with-ranger" class="md-nav__link">Controlling access to User Defined Functions with Ranger</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="system-ranger.html" class="md-nav__link">System level security with Apache Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-ranger.html" class="md-nav__link">Hive-level security with Apache Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-sentry.html" class="md-nav__link">Hive level security with Apache Sentry</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="impersonation.html" class="md-nav__link">User impersonation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="credential-passthrough.html" class="md-nav__link">Kerberos credential passthrough</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="okta-authentication.html" class="md-nav__link">Okta authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="rbac.html" class="md-nav__link">Role based access control</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../migration.html" class="md-nav__link">Migration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">344-e STS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">-</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-ranger-overview--page-root" class="md-nav__link">Apache Ranger Overview</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#getting-the-most-out-of-apache-ranger" class="md-nav__link">Getting the most out of Apache Ranger</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#system-level-security-requirements-info-needed" class="md-nav__link">System-level security requirements - INFO NEEDED</a>
        </li>
        <li class="md-nav__item"><a href="#when-to-drop-back-to-hive-level-security-instead-info-needed" class="md-nav__link">When to drop back to Hive-level security instead - INFO NEEDED</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#important-concepts" class="md-nav__link">Important Concepts</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#resource-and-privilege-relationship" class="md-nav__link">Resource and privilege relationship</a>
        </li>
        <li class="md-nav__item"><a href="#policies" class="md-nav__link">Policies</a>
        </li>
        <li class="md-nav__item"><a href="#resource-sets" class="md-nav__link">Resource sets</a>
        </li>
        <li class="md-nav__item"><a href="#privilege-sets" class="md-nav__link">Privilege sets</a>
        </li>
        <li class="md-nav__item"><a href="#denying-access-to-specific-tables-and-columns" class="md-nav__link">Denying access to specific tables and columns</a>
        </li>
        <li class="md-nav__item"><a href="#column-level-authorization" class="md-nav__link">Column level authorization</a>
        </li>
        <li class="md-nav__item"><a href="#role-management-limitations" class="md-nav__link">Role management limitations</a>
        </li>
        <li class="md-nav__item"><a href="#authorization-limitations" class="md-nav__link">Authorization limitations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#additional-features" class="md-nav__link">Additional features</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#column-masking" class="md-nav__link">Column masking</a>
        </li>
        <li class="md-nav__item"><a href="#caching" class="md-nav__link">Caching</a>
        </li>
        <li class="md-nav__item"><a href="#ranger-audit" class="md-nav__link">Ranger Audit</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#audit" class="md-nav__link">Audit</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#controlling-access-to-user-defined-functions-with-ranger" class="md-nav__link">Controlling access to User Defined Functions with Ranger</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="security-ranger-overview--page-root">Apache Ranger Overview<a class="headerlink" href="#security-ranger-overview--page-root" title="Permalink to this headline">#</a></h1>
<p>Using Ranger requires the installation of the Presto Ranger plugin. Installing
the plugin creates the Starburst Enterprise Presto
<code class="docutils literal notranslate"><span class="pre">starburst-enterprise-presto</span></code> service type, or service definition, in Ranger.
This encompasses a Presto-specific set of resources that include catalog,
schema, table, column, and more, so access rules for there resources can be
configured in Ranger.</p>
<p>The Ranger Presto plugin is responsible for connecting to Ranger from Presto and
using the defined policies for Presto resources. Any user action in Presto, such
as submitting a query, is validated against the policies from Ranger and
potentially prevented.</p>
<p>When a query is submitted to Presto, Presto parses and analyzes the query to
understand the privileges required by the user to access all involved resources
such as schemas and tables. Once a list of these resources is created, Presto
communicates with the Apache Ranger Service to determine if the request
is valid. If the request is valid, the query continues to execute. If the
request is invalid because the user does not have the necessary privileges to
query an object, an error is returned to the user.</p>

<h2 id="getting-the-most-out-of-apache-ranger">Getting the most out of Apache Ranger<a class="headerlink" href="#getting-the-most-out-of-apache-ranger" title="Permalink to this headline">#</a></h2>
<p>There are two ways to implement Apache Ranger:</p>
<ul class="simple">
<li><p>at the <a class="reference internal" href="hive-ranger.html"><span class="doc">Hive-level</span></a> only</p></li>
<li><p>globally, for <a class="reference internal" href="system-ranger.html"><span class="doc">system-level security</span></a></p></li>
</ul>
<p>Implementing Apache Ranger for Hive-level security only severely limits its
usage to the Hive connector only. We strongly suggest that you implement Apache
Ranger with the more powerful system-level security. Implementing system-level
security makes Ranger capable of securing catalogs using other connectors and
many other aspects.</p>

<h3 id="system-level-security-requirements-info-needed">System-level security requirements - INFO NEEDED<a class="headerlink" href="#system-level-security-requirements-info-needed" title="Permalink to this headline">#</a></h3>
<p>NOTE: The should be architectural/high-level, and not a copy of the prereqs. Lorem
ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
incididunt ut labore et dolore magna aliqua. Felis bibendum ut tristique et
egestas quis ipsum.</p>
<ul class="simple">
<li><p>Habitasse platea dictumst vestibulum rhoncus est pellentesque.</p></li>
<li><p>Sed arcu non odio euismod lacinia at quis risus.</p></li>
<li><p>Ornare lectus sit amet est placerat in egestas erat.</p></li>
<li><p>Venenatis lectus magna fringilla urna porttitor rhoncus dolor.</p></li>
</ul>


<h3 id="when-to-drop-back-to-hive-level-security-instead-info-needed">When to drop back to Hive-level security instead - INFO NEEDED<a class="headerlink" href="#when-to-drop-back-to-hive-level-security-instead-info-needed" title="Permalink to this headline">#</a></h3>
<p>NOTE: The should be architectural/high-level, and not a copy of the prereqs.
Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
incididunt ut labore et dolore magna aliqua. Felis bibendum ut tristique et
egestas quis ipsum.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Q: Can system-level Ranger run along side Hive-level?
A:</p>
</div>
<ul class="simple">
<li><p>You have existing Hive-level security that integrates with parts of your tech
stack that cannot implement system-level security</p></li>
<li><p>Sed arcu non odio euismod
lacinia at quis risus.</p></li>
<li><p>Ornare lectus sit amet est placerat in egestas erat.</p></li>
<li><p>Venenatis lectus magna fringilla urna porttitor rhoncus dolor.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: applies only to Hive-level or does it apply to system level also?
A:</p>
</div>



<h2 id="important-concepts">Important Concepts<a class="headerlink" href="#important-concepts" title="Permalink to this headline">#</a></h2>
<p>Apache Ranger offers comprehensive security for Hadoop. Using the Apache Ranger
web console, you can manage policies for access to data for authenticated users
and applications such as Presto.</p>
<p>SEP can use Apache Ranger for <a class="reference internal" href="starburst-hive-security.html#role-based-access-control-hive"><span class="std std-ref">role-based access control</span></a> enforcing
the same and existing privileges granted on Hive objects. Presto enforces
privileges assigned to Hive databases, tables, and columns.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: applies only to Hive-level or does it apply to system level also?
A:</p>
</div>

<h3 id="resource-and-privilege-relationship">Resource and privilege relationship<a class="headerlink" href="#resource-and-privilege-relationship" title="Permalink to this headline">#</a></h3>
<p>The integration of Ranger with the Hive connector does not support any kind of
relation between a resource, such as a table, and the granted access. This is
particularly evident when newly created resources are treated with the access
rights of the existing policies.</p>
<p>For example, as user without full administrative access (<code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">PRIVILEGES</span></code>) you
can end up in a situation where you create a new table, but can not grant access
to that table to other users. As a workaround you can create global policies
that use matching patterns and define the desired default access.</p>
<p>For example, if you want all tables ending with <code class="docutils literal notranslate"><span class="pre">-reporting</span></code> to be accessible
by everyone, you can create a policy that uses a value for <code class="docutils literal notranslate"><span class="pre">*-reporting</span></code> for
the table. If you use <code class="docutils literal notranslate"><span class="pre">*</span></code> for database and <code class="docutils literal notranslate"><span class="pre">*</span></code> for the Hive column, you can
grant a specific access to such a reporting table and all its columns in any
database.</p>
<p>Alternatively you can grant all privileges to anyone creating new objects and
requiring privileges to grant access to others. This policy might be too open
for your use case, depending on your security policies, the data, the number of
users and other aspects.</p>


<span id="hive-ranger-sql"></span><h3 id="policies">Policies<a class="headerlink" href="#policies" title="Permalink to this headline">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING TWO PARAGRAPHS PREVIOUSLY FROM – SYSTEM – RANGER doc -
Q: Do these two paragraphs apply only to Sys-level or do they apply to Hive-level as well?
A:</p>
</div>
<p>Policy creation and management is performed with the Ranger user interface, or
optionally with the Ranger REST API.</p>
<p>A policy is a combination of set of resources and the associated privileges.
Specific user interface elements with drop down and auto-completion are
available for all resources.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>REMAINDER OF SECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: Does the rest of this section apply only to Hive-level or does it apply to system level also?
A:</p>
</div>
<p>SEP allows managing Hive policies using the SQL <a class="reference internal" href="../sql/grant.html"><span class="doc">GRANT</span></a> and
<a class="reference internal" href="../sql/revoke.html"><span class="doc">REVOKE</span></a> statements. Policies managed this way must have the
<code class="docutils literal notranslate"><span class="pre">Delegate</span> <span class="pre">Admin</span></code> option selected in the policy.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you do not select the <code class="docutils literal notranslate"><span class="pre">Delegate</span> <span class="pre">Admin</span></code> option, you receive access
denied errors.</p>
</div>
<p>Ranger Hive service definitions use a limited access-type model compared to
Presto. This limits the granularity of grant and revoke operations.</p>
<p>SEP defines the following mapping from the Hive access type model to the Presto
privileges model:</p>
<table>
<colgroup>
<col style="width: 31%"/>
<col style="width: 69%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Hive access type</p></th>
<th class="head"><p>Presto privilege</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UPDATE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INSERT</span></code> and <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> and <code class="docutils literal notranslate"><span class="pre">DELETE</span></code></p></td>
</tr>
</tbody>
</table>
<p>and the other way around:</p>
<table>
<colgroup>
<col style="width: 31%"/>
<col style="width: 69%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Presto privilege</p></th>
<th class="head"><p>Hive access type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INSERT</span></code></p></td>
<td><p>Unsupported, use <code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">PRIVILEGES</span></code> instead</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">UPDATE</span></code></p></td>
<td><p>Unsupported, use <code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">PRIVILEGES</span></code> instead</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DELETE</span></code></p></td>
<td><p>Unsupported, use <code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">PRIVILEGES</span></code> instead</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">PRIVILEGES</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code> and <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code></p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM – SYSTEM – RANGER doc -
Q: applies only to Sys-level or does it apply to Hive-level as well?
A:</p>
</div>


<h3 id="resource-sets">Resource sets<a class="headerlink" href="#resource-sets" title="Permalink to this headline">#</a></h3>
<p>A resource set includes one or more resources of different resource types.
Wildcard characters are supported to select a number of resources based on a
pattern.</p>
<ul class="simple">
<li><p>catalog</p></li>
<li><p>catalog - schema</p></li>
<li><p>catalog - schema - table</p></li>
<li><p>catalog - schema - table - column</p></li>
<li><p>catalog - schema - procedure</p></li>
<li><p>catalog - session property</p></li>
<li><p>function</p></li>
<li><p>system session property</p></li>
<li><p>query</p></li>
</ul>
<p>As you can see from the list above, some resources are hierarchically organized
within a catalog and below. This allows you for example to restrict access to a
complete catalog, a specific schema, or table or even down to a column or a
procedure within a schema.</p>
<p>For example, if you can define a set of resources, that allows you to restrict
access to all the two tables <code class="docutils literal notranslate"><span class="pre">credit-info</span></code> and <code class="docutils literal notranslate"><span class="pre">cards-info</span></code> in all schemas
in the <code class="docutils literal notranslate"><span class="pre">hdfs</span></code> catalog.</p>
<ul class="simple">
<li><p>Catalog: hdfs</p></li>
<li><p>Schema: *</p></li>
<li><p>Table: credit-info, cards-info</p></li>
</ul>
<p>A set of resource works as a primary key for a policy. It needs to be unique.
Multiple policies however may cover a single resource because of the wildcard.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM – SYSTEM – RANGER doc -
Q: applies only to Sys-level or does it apply to Hive-level as well?
A:</p>
</div>


<h3 id="privilege-sets">Privilege sets<a class="headerlink" href="#privilege-sets" title="Permalink to this headline">#</a></h3>
<p>A set of privileges consists of one or more user groups, roles and users, and a
set of access types for the specified resource set. Privileges can allow or deny operations.</p>
<p>The catalog, schema, table and column resources, which grant access to resources
for queries, have the following access types.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code> to read data from the resource.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INSERT</span></code> to add data to the resource.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> to change data in the resource.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DELETE</span></code> to remove data from the resource.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OWNERSHIP</span></code> to claim ownership of the resource, which provides complete
access.</p></li>
</ul>
<p>In addition there are privileges that determine access to queries and their
usage, and are therefore of a more general nature.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code> to list queries.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EXECUTE</span></code> to initiate processing of any query. Without this privilege user
action is extremely limited.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KILL</span></code> to stop processing of any query.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM – SYSTEM – RANGER doc -
Q: applies only to Sys-level or does it apply to Hive-level as well?
A:</p>
</div>


<span id="system-ranger-deny"></span><h3 id="denying-access-to-specific-tables-and-columns">Denying access to specific tables and columns<a class="headerlink" href="#denying-access-to-specific-tables-and-columns" title="Permalink to this headline">#</a></h3>
<p>You may need to restrict access for users to tables or columns for security or
other reasons.</p>
<p>The following example shows how to achieve that for any <code class="docutils literal notranslate"><span class="pre">$path</span></code> column and any
<code class="docutils literal notranslate"><span class="pre">$partitions</span></code> table exposed by a catalog called <code class="docutils literal notranslate"><span class="pre">hive</span></code>:</p>
<ul class="simple">
<li><p>Create a Ranger <code class="docutils literal notranslate"><span class="pre">ALLOW</span></code> policy with <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> access type and assign it to
the users, groups or roles you need.</p></li>
<li><p>Add a pattern to allow all resources in the the <code class="docutils literal notranslate"><span class="pre">hive</span></code> catalog:</p>
<ul>
<li><p>catalog: <code class="docutils literal notranslate"><span class="pre">hive</span></code></p></li>
<li><p>schema: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>table: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>column: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
</ul>
</li>
<li><p>Create a similar policy, this time with the <code class="docutils literal notranslate"><span class="pre">DENY</span></code> type.</p></li>
<li><p>Add a pattern to deny access to the <code class="docutils literal notranslate"><span class="pre">$path</span></code> column:</p>
<ul>
<li><p>catalog: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>schema: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>table: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>column: <code class="docutils literal notranslate"><span class="pre">$path</span></code></p></li>
</ul>
</li>
<li><p>Create another <code class="docutils literal notranslate"><span class="pre">DENY</span></code> policy that restricts access to <code class="docutils literal notranslate"><span class="pre">$partitions</span></code>
tables:</p>
<ul>
<li><p>catalog: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>schema: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>table: <code class="docutils literal notranslate"><span class="pre">*$partitions</span></code></p></li>
<li><p>column: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
</ul>
</li>
</ul>
<p>This method of restricting access works, because Ranger processes <code class="docutils literal notranslate"><span class="pre">DENY</span></code>
policies before <code class="docutils literal notranslate"><span class="pre">ALLOW</span></code> policies, when evaluating conditions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">$path</span></code> column is an artificial column in Hive.  It contains information
about the location of data file. The <code class="docutils literal notranslate"><span class="pre">table$partitions</span></code> table contains
internal information about the partitioning of the table. All this information
should typically not be available to normal users. The above examples shows
how you can implement this best practice for catalogs using the Hive
connector.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: applies only to Hive-level or does it apply to system level also?
A:</p>
</div>


<h3 id="column-level-authorization">Column level authorization<a class="headerlink" href="#column-level-authorization" title="Permalink to this headline">#</a></h3>
<p>Presto will enforce column level privileges granted to roles. For example, if a user is only granted
access to a subset of table columns, they will only be able to query from these columns.
If they execute an SQL statement that refers to other columns, the query will fail with an error.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: applies only to Hive-level or does it apply to system level also?
A:</p>
</div>


<h3 id="role-management-limitations">Role management limitations<a class="headerlink" href="#role-management-limitations" title="Permalink to this headline">#</a></h3>
<p>SQL supports the <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE</span> <span class="pre">[role]</span></code> statement to enable or disable a role.
This feature is not supported in Ranger. All user roles are always enabled.
Querying <code class="docutils literal notranslate"><span class="pre">information_schema.applicable_roles</span></code> and
<code class="docutils literal notranslate"><span class="pre">information_schema.enabled_roles</span></code> yields the same results.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: applies only to Hive-level or does it apply to system level also?
A:</p>
</div>


<h3 id="authorization-limitations">Authorization limitations<a class="headerlink" href="#authorization-limitations" title="Permalink to this headline">#</a></h3>
<p>Ranger authorization in Presto has following limitations:</p>
<blockquote>
<div><ul class="simple">
<li><p>authorization information cannot be accessed by querying the following tables like:
<code class="docutils literal notranslate"><span class="pre">information_schema.roles</span></code>, <code class="docutils literal notranslate"><span class="pre">information_schema.applicable_roles</span></code>,
<code class="docutils literal notranslate"><span class="pre">information_schema.enabled_roles</span></code>, <code class="docutils literal notranslate"><span class="pre">information_schema.table_privileges</span></code></p></li>
<li><p>Presto does not support any modification of authorization policies in Sentry, this
encloses commands like <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">ROLE...</span></code>, <code class="docutils literal notranslate"><span class="pre">GRANT...</span></code> or <code class="docutils literal notranslate"><span class="pre">REVOKE</span></code>.</p></li>
<li><p>Presto does not support <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE...</span></code> for Ranger authorization, by default all user applicable roles are enabled.</p></li>
<li><p>In case of usage of unsupported column masking <code class="docutils literal notranslate"><span class="pre">MASK_NULL</span></code> will be used.</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: applies only to Hive-level or does it apply to system level also?
A:</p>
</div>



<h2 id="additional-features">Additional features<a class="headerlink" href="#additional-features" title="Permalink to this headline">#</a></h2>
<p>In addition to enforcing the policies in Apache Ranger, Presto also integrates
with Apache Ranger Key Management Service, and has support for AWS Glue Data
Catalog, row level filtering and tag-based policies.</p>
<p>Column masking, audit and caching are also supported, and are described below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: applies only to Hive-level or does it apply to system level also?
A:</p>
</div>

<h3 id="column-masking">Column masking<a class="headerlink" href="#column-masking" title="Permalink to this headline">#</a></h3>
<p>Presto Hive Ranger integration supports most of the column masking methods that
are supported in Hive with Ranger. Presto does not distinguish upper case, lower
case and digital characters when masking. <code class="docutils literal notranslate"><span class="pre">x</span></code> is used for all mentioned
character types.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: applies only to Hive-level or does it apply to system level also?
A:</p>
</div>


<h3 id="caching">Caching<a class="headerlink" href="#caching" title="Permalink to this headline">#</a></h3>
<p>Caching is also used to improve performance and reduce the number of requests to
the Ranger service. Caching is enabled through configuration properties, which
can be found in the table at the bottom of this page.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING AUDIT SECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: Do these audit features apply only to Hive-level or does it apply to system level also?
A:</p>
</div>


<span id="id1"></span><h3 id="ranger-audit">Ranger Audit<a class="headerlink" href="#ranger-audit" title="Permalink to this headline">#</a></h3>
<p>Ranger Audit is configured in the Ranger-specific file
<code class="docutils literal notranslate"><span class="pre">/etc/hive/conf/ranger-hive-audit.xml</span></code>. The location of the file has to be
specified in your catalog properties file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ranger.config-resources=/etc/hive/conf/ranger-hive-audit.xml
</pre></div>
</div>
<p>Audit operates for <a class="reference internal" href="hive-ranger.html"><span class="doc">Hive-level security with Apache Ranger</span></a> and <a class="reference internal" href="#system-ranger-audit"><span class="std std-ref">system level security
with Apache Ranger</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING AUDIT SECTION PREVIOUSLY FROM – SYSTEM – RANGER doc -
Q: Do these audit features apply only to Sys-level or does it apply to Hive-level as well?
A:</p>
</div>



<span id="system-ranger-audit"></span><h2 id="audit">Audit<a class="headerlink" href="#audit" title="Permalink to this headline">#</a></h2>
<p>System level security can be configured to use Ranger audit. It automatically
verifies, if a user can access queries from other users. Technically this is
performed by accessing the internal table <code class="docutils literal notranslate"><span class="pre">system.runtime.queries</span></code>. Any access
to the table is logged.</p>
<p>The property <code class="docutils literal notranslate"><span class="pre">ranger.audit.system-runtime-queries.enabled</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>
by default and controls this logging behavior.</p>
<p>The <a class="reference internal" href="../admin/web-interface.html"><span class="doc">Web UI</span></a> makes heavy use of the queries table. As a
result using the web interface causes a flood of audit events. Setting the
property to <code class="docutils literal notranslate"><span class="pre">false</span></code> disables this audit logging.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOLLOWING SUBSECTION PREVIOUSLY FROM HIVE RANGER doc -
Q: applies only to Hive-level or does it apply to system level also?
A:</p>
</div>

<h3 id="controlling-access-to-user-defined-functions-with-ranger">Controlling access to User Defined Functions with Ranger<a class="headerlink" href="#controlling-access-to-user-defined-functions-with-ranger" title="Permalink to this headline">#</a></h3>
<p>Ranger System Access Control is used to enforce User Defined Function (UDF)
policies set by Ranger. A UDF in Presto is deployed as a plugin
(<a class="reference internal" href="../develop/functions.html"><span class="doc">Functions</span></a>) and stored in the Presto global namespace. This
global namespace is managed at the System Access Control (see
<a class="reference internal" href="../develop/system-access-control.html"><span class="doc">System Access Control</span></a>) level. This is independent of the Ranger
Connector Access Control used to enforce all other Ranger policies at the
catalog level.</p>
<p>The Ranger resource hierarchy for all UDF policies need to have an associated
database (or schema) namespace when creating the policy. Because the global
namespace is independent of any connector namespace, this poses a slight
challenge to control access to UDFs using Ranger. To overcome this you must
specify <code class="docutils literal notranslate"><span class="pre">$presto</span></code> as the database name in Ranger. This will keep all Presto
functions are under the <code class="docutils literal notranslate"><span class="pre">$presto</span></code> database in Ranger resource hierarchy.</p>
<p>To configure Ranger System Access Control for User Defined Functions, you need
to add the following to the System Access Control property file. Here is an
example <code class="docutils literal notranslate"><span class="pre">etc/access-control.properties</span></code> below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>access-control.name=ranger-system-access-control
ranger.policy-rest-url=https://ranger-host:6182
ranger.service-name=hive

ranger.authentication-type=KERBEROS
ranger.kerberos-principal=presto-server/presto-server-node@EXAMPLE.COM
ranger.kerberos-keytab=/etc/presto/conf/presto-server.keytab
ranger.plugin-policy-ssl-config-file=/etc/hive/conf/ranger-policymgr-ssl.xml
</pre></div>
</div>
<p>All Ranger properties that are allowed in <code class="docutils literal notranslate"><span class="pre">hive.properties</span></code> are allowed here.
However Ranger properties related to row filtering or column masking are
ignored. This additional configuration is needed because the Ranger System
Access Control uses an independent Ranger client from the Ranger Connector
Access Control.</p>
<p>Recall that in Presto only one System Access Control can be defined, while
Connector Access Control can be defined per each Presto catalog. In the scenario
where there are multiple Hive connectors and multiple Ranger services, only one
of those Ranger services can be used to managed the UDF policies.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>TABLE PREVIOUSLY FROM HIVE RANGER doc -
Q: I cross-checked the tables and they seems to be identical, except the
Sys-level file had Kerberos commented out. Should this still be the case,
even when they are supported in Hive-level impls? Are there any properties
at all that apply only to one setup and not the other?
A:</p>
</div>



<span id="ranger-config-properties"></span><h2 id="configuration-properties">Configuration properties<a class="headerlink" href="#configuration-properties" title="Permalink to this headline">#</a></h2>
<table id="id2">
<caption><span class="caption-text">Ranger properties</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 20%"/>
<col style="width: 20%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-rest-url</span></code></p></td>
<td></td>
<td><p>Address URL of Ranger service</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.service-name</span></code></p></td>
<td></td>
<td><p>Ranger Presto plugin service name</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.authentication-type</span></code></p></td>
<td></td>
<td><p>Authentication method to for connecting to Ranger. Possible values are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BASIC</span></code>, HTTP basic authentication</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>, Kerberos authentication, notice that
<code class="docutils literal notranslate"><span class="pre">ranger.authentication-type=KERBEROS</span></code> requires the <code class="docutils literal notranslate"><span class="pre">https</span></code>
protocol to be used for the <code class="docutils literal notranslate"><span class="pre">ranger.policy-rest-url</span></code>.</p></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.presto-plugin-username</span></code></p></td>
<td></td>
<td><p>Ranger Presto plugin user name. This property is used when <code class="docutils literal notranslate"><span class="pre">ranger.</span>
<span class="pre">authentication-type=BASIC</span></code> is set.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.presto-plugin-password</span></code></p></td>
<td></td>
<td><p>Ranger Presto plugin user password. This property is used when
<code class="docutils literal notranslate"><span class="pre">ranger.authentication-type=BASIC</span></code> is set.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.kerberos-principal</span></code></p></td>
<td></td>
<td><p>Ranger client Kerberos principal. This property is used when
<code class="docutils literal notranslate"><span class="pre">ranger.authentication-type=KERBEROS</span></code> is set.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.kerberos-keytab</span></code></p></td>
<td></td>
<td><p>Ranger client Kerberos keytab file location. This property is used when
<code class="docutils literal notranslate"><span class="pre">ranger.authentication-type=KERBEROS</span></code> is set.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.plugin-policy-ssl-config-file</span></code></p></td>
<td></td>
<td><p>Path to Ranger SSL configuration file. This file is required when
<code class="docutils literal notranslate"><span class="pre">https</span></code> protocol is used for <code class="docutils literal notranslate"><span class="pre">ranger.policy-rest-url</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-refresh-interval</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30s</span></code></p></td>
<td><p>Interval determining how often authorization polices are refreshed. The
highest latency after which changes in Ranger authorization policies are
visible in Presto.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-connection-timeout</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30s</span></code></p></td>
<td><p>Ranger service connection timeout.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-read-timeout</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30s</span></code></p></td>
<td><p>Ranger service read timeout.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-cache-dir</span></code></p></td>
<td></td>
<td><p>Path to ranger cache dir for policies. It allows to load policies from
cache on startup, even though Ranger Policy Admin was not available at
the moment.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.cache-ttl</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30s</span></code></p></td>
<td><p>Period how long group mapping information is cached in Presto. <code class="docutils literal notranslate"><span class="pre">0ms</span></code>
disables the cache.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.cache-refresh-interval</span></code></p></td>
<td><p>Disabled, <code class="docutils literal notranslate"><span class="pre">0ms</span></code></p></td>
<td><p>Period how long group mapping information is refreshed in Presto. Any
value greater than <code class="docutils literal notranslate"><span class="pre">ranger.cache-ttl</span></code> disables it.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.row-filtering.enabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>To enable row filtering set this flag to <code class="docutils literal notranslate"><span class="pre">true</span></code>. Note that there are
semantic differences between Presto SQL and Hive QL.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.wild-card-resource-matching-for-row-filtering</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>To enable resource wild card matching for row filtering set this flag to
<code class="docutils literal notranslate"><span class="pre">true</span></code>. When two policies are matching single resource, the one without
wildcards is used. When multiple wildcard policies match, it is
undetermined which one is used.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.wild-card-resource-matching-for-column-masking</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>To enable resource wild card matching for column masking set this flag to
<code class="docutils literal notranslate"><span class="pre">true</span></code>. When two policies are matching single resource, the one without
wildcards is used. When multiple wildcard policies match, it is
undetermined which one is used.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.config-resources</span></code></p></td>
<td></td>
<td><p>Additional XML configuration files which is read before applying Presto
Ranger configuration. Useful for reusing existing Hive Ranger
configuration with things like Ranger Audit configuration.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.sql.enabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>Enable <a class="reference internal" href="#hive-ranger-sql"><span class="std std-ref">Ranger policy management with SQL</span></a>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PARTIAL TABLE PREVIOUSLY FROM – SYSTEM – RANGER doc -
Q: These were commented out. Do these properties apply only to Sys-level or will they apply to both? Should they still be commented out?
A:</p>
</div>
<table id="id3">
<caption><span class="caption-text">Ranger properties</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 20%"/>
<col style="width: 20%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.all-groups.page-size</span></code></p></td>
<td><p>Page size to load all groups from Ranger, used to chunk the data loading</p></td>
<td><p>TBD ???</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.all-groups.loading-parallelism</span></code></p></td>
<td><p>Max ranger groups parallel sections during single load TBD ?? doesnt make sense</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.all-groups.loading-connection-timeout</span></code></p></td>
<td><p>Timeout to use when connecting to load all groups from Ranger</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">120s</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.all-groups.loading-read-timeout</span></code></p></td>
<td><p>Timeout to use when reading all groups from Ranger</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30s</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.single-user-groups.loading-connection-timeout</span></code></p></td>
<td><p>Timeout to use when connecting to load a single user’s groups from Ranger</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30s</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.single-user-groups.loading-read-timeout</span></code></p></td>
<td><p>Timeout to use when reading a single user’s groups from Ranger</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10s</span></code></p></td>
</tr>
</tbody>
</table>




          </article>
        </div>
      </div>
    </main>
  </div>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="starburst-hive-security.html" title="Starburst Hive connector security"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Starburst Hive connector security </span>
              </div>
            </a>
          
          
            <a href="system-ranger.html" title="System level security with Apache Ranger"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> System level security with Apache Ranger </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>

<!-- custom footer should go here in time -->

<div style="background: #253746; align-content: center; height: 3em;"> 
</div>
  </body>
</html>