

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Exchange Properties &mdash; Starburst Enterprise Presto</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="8.4. Properties Reference" href="properties.html"/>
        <link rel="next" title="Task Properties" href="properties-task.html"/>
        <link rel="prev" title="Spilling Properties" href="properties-spilling.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">4. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">5. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../admin.html">8. Administration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="web-interface.html">8.1. Web UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuning.html">8.2. Tuning Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="jmx.html">8.3. Monitoring with JMX</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="properties.html">8.4. Properties Reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="properties-general.html">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties-memory-management.html">Memory Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties-query-management.html">Query Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties-spilling.html">Spilling</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Exchange</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#exchange-client-threads"><code class="docutils literal notranslate"><span class="pre">exchange.client-threads</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exchange-concurrent-request-multiplier"><code class="docutils literal notranslate"><span class="pre">exchange.concurrent-request-multiplier</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exchange-data-integrity-verification"><code class="docutils literal notranslate"><span class="pre">exchange.data-integrity-verification</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exchange-max-buffer-size"><code class="docutils literal notranslate"><span class="pre">exchange.max-buffer-size</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exchange-max-response-size"><code class="docutils literal notranslate"><span class="pre">exchange.max-response-size</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sink-max-buffer-size"><code class="docutils literal notranslate"><span class="pre">sink.max-buffer-size</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="properties-task.html">Task</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties-writer-scaling.html">Writer Scaling</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties-node-scheduler.html">Node Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties-optimizer.html">Optimizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties-logging.html">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties-web-interface.html">Web UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties-regexp-function.html">Regular Expression Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spill.html">8.5. Spill to Disk</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-groups.html">8.6. Resource Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="session-property-managers.html">8.7. Session Property Managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="dist-sort.html">8.8. Distributed Sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage-metrics.html">8.9. Usage Metrics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">339-e STS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/338-e/">Latest LTS (338-e)</option>
    <option value="/332-e/">332-e LTS</option>
    <option value="/323-e/">323-e LTS</option>
    <option value="/341-e/">Latest STS (341-e)</option>
    <option value="/340-e/">340-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">339-e STS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../admin.html"><span class="section-number">8. </span>Administration</a> &raquo;</li>
      
        <li><a href="properties.html"><span class="section-number">8.4. </span>Properties Reference</a> &raquo;</li>
      
    <li>Exchange Properties</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="exchange-properties">
<h1>Exchange Properties<a class="headerlink" href="#exchange-properties" title="Permalink to this headline">#</a></h1>
<p>Exchanges transfer data between Presto nodes for different stages of
a query. Adjusting these properties may help to resolve inter-node
communication issues or improve network utilization.</p>
<div class="section" id="exchange-client-threads">
<h2><code class="docutils literal notranslate"><span class="pre">exchange.client-threads</span></code><a class="headerlink" href="#exchange-client-threads" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">25</span></code></p></li>
</ul>
<p>Number of threads used by exchange clients to fetch data from other Presto
nodes. A higher value can improve performance for large clusters or clusters
with very high concurrency, but excessively high values may cause a drop
in performance due to context switches and additional memory usage.</p>
</div>
<div class="section" id="exchange-concurrent-request-multiplier">
<h2><code class="docutils literal notranslate"><span class="pre">exchange.concurrent-request-multiplier</span></code><a class="headerlink" href="#exchange-concurrent-request-multiplier" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">3</span></code></p></li>
</ul>
<p>Multiplier determining the number of concurrent requests relative to
available buffer memory. The maximum number of requests is determined
using a heuristic of the number of clients that can fit into available
buffer space, based on average buffer usage per request times this
multiplier. For example, with an <code class="docutils literal notranslate"><span class="pre">exchange.max-buffer-size</span></code> of <code class="docutils literal notranslate"><span class="pre">32</span> <span class="pre">MB</span></code>
and <code class="docutils literal notranslate"><span class="pre">20</span> <span class="pre">MB</span></code> already used and average size per request being <code class="docutils literal notranslate"><span class="pre">2MB</span></code>,
the maximum number of clients is
<code class="docutils literal notranslate"><span class="pre">multiplier</span> <span class="pre">*</span> <span class="pre">((32MB</span> <span class="pre">-</span> <span class="pre">20MB)</span> <span class="pre">/</span> <span class="pre">2MB)</span> <span class="pre">=</span> <span class="pre">multiplier</span> <span class="pre">*</span> <span class="pre">6</span></code>. Tuning this
value adjusts the heuristic, which may increase concurrency and improve
network utilization.</p>
</div>
<div class="section" id="exchange-data-integrity-verification">
<h2><code class="docutils literal notranslate"><span class="pre">exchange.data-integrity-verification</span></code><a class="headerlink" href="#exchange-data-integrity-verification" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Allowed values:</strong> <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, <code class="docutils literal notranslate"><span class="pre">ABORT</span></code>, <code class="docutils literal notranslate"><span class="pre">RETRY</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">ABORT</span></code></p></li>
</ul>
<p>Configure the resulting behavior of data integrity issues. By default,
<code class="docutils literal notranslate"><span class="pre">ABORT</span></code> causes queries to be aborted when data integrity issues are
detected as part of the built-in verification. Setting the property to
<code class="docutils literal notranslate"><span class="pre">NONE</span></code> disables the verification. <code class="docutils literal notranslate"><span class="pre">RETRY</span></code> causes the data exchange to be
repeated when integrity issues are detected.</p>
</div>
<div class="section" id="exchange-max-buffer-size">
<h2><code class="docutils literal notranslate"><span class="pre">exchange.max-buffer-size</span></code><a class="headerlink" href="#exchange-max-buffer-size" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">32MB</span></code></p></li>
</ul>
<p>Size of buffer in the exchange client that holds data fetched from other
nodes before it is processed. A larger buffer can increase network
throughput for larger clusters, and thus decrease query processing time,
but reduces the amount of memory available for other usages.</p>
</div>
<div class="section" id="exchange-max-response-size">
<h2><code class="docutils literal notranslate"><span class="pre">exchange.max-response-size</span></code><a class="headerlink" href="#exchange-max-response-size" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1MB</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">16MB</span></code></p></li>
</ul>
<p>Maximum size of a response returned from an exchange request. The response
is placed in the exchange client buffer, which is shared across all
concurrent requests for the exchange.</p>
<p>Increasing the value may improve network throughput, if there is high
latency. Decreasing the value may improve query performance for large
clusters as it reduces skew, due to the exchange client buffer holding
responses for more tasks, rather than hold more data from fewer tasks.</p>
</div>
<div class="section" id="sink-max-buffer-size">
<h2><code class="docutils literal notranslate"><span class="pre">sink.max-buffer-size</span></code><a class="headerlink" href="#sink-max-buffer-size" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">32MB</span></code></p></li>
</ul>
<p>Output buffer size for task data that is waiting to be pulled by upstream
tasks. If the task output is hash partitioned, then the buffer is
shared across all of the partitioned consumers. Increasing this value may
improve network throughput for data transferred between stages, if the
network has high latency, or if there are many nodes in the cluster.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="properties-task.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="Task Properties" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="properties-spilling.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="Spilling Properties" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'339',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>