

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.3. Configuring Presto &mdash; Starburst Distribution of Presto 323-e.8 Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Distribution of Presto 323-e.8 Documentation" href="../index.html"/>
        <link rel="up" title="6. Presto on Microsoft Azure" href="../azure.html"/>
        <link rel="next" title="6.4. Accessing the Presto Cluster" href="access.html"/>
        <link rel="prev" title="6.2. Deploying Presto" href="deploy.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Distribution of Presto
          

          
          </a>

          
            
            
              <div class="version">
                323-e.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system-requirements.html">2. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">3. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">4. Running Presto in a Docker container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">5. Presto on Amazon Web Services</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../azure.html">6. Presto on Microsoft Azure</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">6.1. Overview of Presto on Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploy.html">6.2. Deploying Presto</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">6.3. Configuring Presto</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#default-configuration">Default Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-configuration">Custom Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-custom-configuration-package">Creating the Custom Configuration Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-custom-configuration-package">Example Custom Configuration Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deploying-the-custom-configuration-package">Deploying the Custom Configuration Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#interactions-between-default-and-custom-configurations">Interactions Between Default and Custom Configurations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="access.html">6.4. Accessing the Presto Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html">6.5. Querying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="azurestorage.html">6.6. Querying Azure Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="secondarystorage.html">6.7. Secondary and Additional Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="scriptactions.html">6.8. Script Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="superset.html">6.9. Using Apache Superset</a></li>
<li class="toctree-l2"><a class="reference internal" href="scaling.html">6.10. Scaling a Running Presto Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">6.11. Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="uninstall.html">6.12. Uninstalling Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="resources.html">6.13. Related Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">7. Presto on Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation-rpm.html">8. Presto RPM Installation using Presto Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/deployment.html">9. Presto Tarball Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">10. Presto Client Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">11. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">12. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">13. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">14. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">15. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">16. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">17. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">18. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">19. Older Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">20. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">21. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Starburst Distribution of Presto</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../azure.html">6. Presto on Microsoft Azure</a> &raquo;</li>
      
    <li>6.3. Configuring Presto</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/azure/configuration.rst.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuring-presto">
<h1>6.3. Configuring Presto</h1>
<p>Presto has an extensive set of configuration switches that allow it to be tuned for certain specific requirements. Default values are chosen for the best “out of the box” experience. However, if you need to fine-tune Presto behavior, you can do so when using Starburst’s Script Actions for Azure HDInsight.</p>
<div class="section" id="default-configuration">
<h2>Default Configuration</h2>
<p>The following configuration changes are applied automatically for you:</p>
<ul class="simple">
<li>Java heap maximum memory (-Xmx) is set appropriately for the selected Azure node size</li>
<li>JVM’s JIT caches are set to 512 MiB</li>
<li>Java is configured to use G1 garbage collector, this is the recommended garbage collector to use when running Presto</li>
</ul>
</div>
<div class="section" id="custom-configuration">
<h2>Custom Configuration</h2>
<p>When using Starburst Presto on Azure HDInsight, you remain in full control of the Presto cluster being run. Using the Configure Presto Script Action, you can deploy a custom configuration. Before submitting the Script Action, you need to create a configuration package.</p>
<div class="section" id="creating-the-custom-configuration-package">
<h3>Creating the Custom Configuration Package</h3>
<p>The configuration package is a ZIP file with the structure shown below. All files are optional except for top-level etc/ directory entry.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>etc/
        config.properties
        jvm.config
        catalog/
                hive.properties
                &lt;catalog-name&gt;.properties
</pre></div>
</div>
<p><strong>etc/config.properties</strong>
This file is optional. Please refer to Properties Reference for documentation of properties that can be set here.</p>
<p><strong>etc/jvm.config</strong>
This file is optional. Please refer to Oracle’s documentation of options that can be set here. Please refer to Tuning Presto for information about JVM options that are often useful when troubleshooting performance issues. Certain options, including -Xmx and garbage collection algorithm selection are set by default.</p>
<p><strong>etc/catalog/&lt;catalog-name&gt;.properties</strong>
This file is optional. When such a file is placed in the configuration package, a catalog &lt;catalog-name&gt; will be created. The file must contain the following:</p>
<div class="highlight-RST"><div class="highlight"><pre><span></span>connector.name=&lt;connector-name&gt;
</pre></div>
</div>
<p>Where <code class="docutils literal"><span class="pre">&lt;connector-name&gt;</span></code> is the name of the connector you are going to use, please refer to the <a class="reference internal" href="../connector.html"><span class="doc">Connector</span></a> documentation for a list of supported connectors and their documentation. If the chosen connector has some mandatory configuration parameters, they must be set in the <code class="docutils literal"><span class="pre">&lt;catalog-name&gt;.properties</span></code> file. There can be more than one such file in the <code class="docutils literal"><span class="pre">etc/catalog/</span></code> folder of the configuration package. This allows you to define multiple catalogs.</p>
<p>A <code class="docutils literal"><span class="pre">hive.properties</span></code> files will alway be created for you. However, you can still create one in the configuration package to override properties or add additional ones.</p>
<p>Please refer to <a class="reference internal" href="#aux-files-azure"><span class="std std-ref">Auxiliary Files</span></a> for instructions on how to configure properties that refer to additional files.</p>
<p id="aux-files-azure"><strong>Auxiliary Files</strong>
If a configuration property in any of the configuration files accepts a path to an additional file (e.g., Hive’s <code class="docutils literal"><span class="pre">security.config-file</span></code>), add the file in the configuration package and refer to it using a path that is <em>relative</em>, starting with the configuration package top-level directory.</p>
<p>For example, if you are configuring Hive connector to use <code class="docutils literal"><span class="pre">hive.security=file</span></code>, you also need to set <code class="docutils literal"><span class="pre">security.config-file</span></code> (see <a class="reference internal" href="../connector/hive-security.html"><span class="doc">Hive Security</span></a> documentation for the meaning and structure of the file). To do so, add <code class="docutils literal"><span class="pre">etc/catalog/hive-security.json</span></code> in the configuration package and refer to <code class="docutils literal"><span class="pre">etc/catalog/hive-security.json</span></code> using a relative path:</p>
<div class="highlight-RST"><div class="highlight"><pre><span></span><span class="cp">...</span>
hive.security=file
security.config-file=etc/catalog/hive-security.json
</pre></div>
</div>
</div>
<div class="section" id="example-custom-configuration-package">
<h3>Example Custom Configuration Package</h3>
<p>You can download an example configuration package from Starburst here:</p>
<p><a class="reference external" href="https://starburstdata.blob.core.windows.net/presto/test/presto-override.zip">https://starburstdata.blob.core.windows.net/presto/test/presto-override.zip</a></p>
</div>
<div class="section" id="deploying-the-custom-configuration-package">
<h3>Deploying the Custom Configuration Package</h3>
<p>The custom configuration package is deployed via Script Action. Refer to the <a class="reference internal" href="scriptactions.html"><span class="doc">Script Actions</span></a> section for information on how to submit a Script Action. For this Script Actions enter the following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Script Type</th>
<th class="head">Custom</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Script Name</td>
<td>Name the script e.g. “Custom Presto Configuration”</td>
</tr>
<tr class="row-odd"><td>Bash script URI.</td>
<td><p class="first"><code class="docutils literal"><span class="pre">https://starburstdata.blob.core.windows.net/&lt;container-name&gt;/update-presto-config.sh</span></code></p>
<p>For Presto release 0.208-e the <code class="docutils literal"><span class="pre">container-name</span></code> is <code class="docutils literal"><span class="pre">presto208e</span></code>.</p>
<p class="last">For release 0.213-e and newer, the <code class="docutils literal"><span class="pre">container-name</span></code> is <code class="docutils literal"><span class="pre">&lt;versionnumber&gt;-e</span></code>.
e.g <a class="reference external" href="https://starburstdata.blob.core.windows.net/302-e/update-presto-config.sh">https://starburstdata.blob.core.windows.net/302-e/update-presto-config.sh</a>.</p>
</td>
</tr>
<tr class="row-even"><td>Node Types</td>
<td>Check Head and Worker</td>
</tr>
<tr class="row-odd"><td>Parameters</td>
<td><code class="docutils literal"><span class="pre">-p</span> <span class="pre">&lt;path_to_custom_configuration.zip&gt;.</span></code> The configuration zip file can be stored in Azure
Standard blob storage. For publicly accessible containers you could use https URI:
e.g -p <a class="reference external" href="https://starburstdata.blob.core.windows.net/presto/test/presto-override.zip">https://starburstdata.blob.core.windows.net/presto/test/presto-override.zip</a>
For blob containers with private access you can use the blob URI format. The script action
will use Hadoop DFS client to access the configuration zip file in this case:
eg: -p wasbs://container_name&#64;storage_account/path/to/zip</td>
</tr>
<tr class="row-even"><td>Persist Script Action</td>
<td>This is optional. But you should consider checking it if you plan to expand
the cluster. When you expand, this Script Action will be run automatically
if the box is checked.</td>
</tr>
</tbody>
</table>
<p>Note that the path to the custom configuration package must be in a publicly accessible location.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/configuration_script_action.png"><img alt="../_images/configuration_script_action.png" src="../_images/configuration_script_action.png" style="width: 435.0px; height: 837.0px;" /></a>
</div></blockquote>
</div>
<div class="section" id="interactions-between-default-and-custom-configurations">
<h3>Interactions Between Default and Custom Configurations</h3>
<p>It is important to note that the “out of the box” default values are overridden only for the keys where an advanced configuration entry exits. If no advanced configuration is entered, the default value will remain. However, in the case of jvm.config , additional configuration entries are appended to the default configuration.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="access.html" class="btn btn-neutral float-right" title="6.4. Accessing the Presto Cluster" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="deploy.html" class="btn btn-neutral" title="6.2. Deploying Presto" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'323-e.8',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>