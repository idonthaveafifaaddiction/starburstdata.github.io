

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>12.8. Thrift Connector &mdash; Starburst Distribution of Presto 0.195-e.0.5 Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Distribution of Presto 0.195-e.0.5 Documentation" href="../index.html"/>
        <link rel="up" title="12. Community Supported Connectors" href="../community_connector.html"/>
        <link rel="next" title="13. Community Supported Functionality" href="../installation.html"/>
        <link rel="prev" title="12.7. Redshift Connector" href="redshift.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Distribution of Presto
          

          
          </a>

          
            
            
              <div class="version">
                0.195-e.0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system-requirements.html">2. System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">3. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">4. Running Presto sandbox in a Docker container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-installation-cluster-manual.html">5. Presto Server Installation on a Cluster (Presto Admin and RPMs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-installation-aws-emr-manual.html">6. Presto Server Installation on an AWS EMR (Presto Admin and RPMs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">7. Presto Client Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presto-admin/user-guide.html">8. Presto Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">9. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">10. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">11. Starburst Supported Connectors</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../community_connector.html">12. Community Supported Connectors</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="accumulo.html">12.1. Accumulo Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka.html">12.2. Kafka Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka-tutorial.html">12.3. Kafka Connector Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="localfile.html">12.4. Local File Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb.html">12.5. MongoDB Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis.html">12.6. Redis Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redshift.html">12.7. Redshift Connector</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">12.8. Thrift Connector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#multiple-thrift-systems">Multiple Thrift Systems</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-properties">Configuration Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#static-location-hosts"><code class="docutils literal"><span class="pre">static-location.hosts</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#presto-thrift-max-response-size"><code class="docutils literal"><span class="pre">presto-thrift.max-response-size</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#presto-thrift-metadata-refresh-threads"><code class="docutils literal"><span class="pre">presto-thrift.metadata-refresh-threads</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#thrift-client-properties">Thrift Client Properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#thrift-idl-file">Thrift IDL File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">13. Community Supported Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">14. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">15. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">16. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">17. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">18. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">19. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">20. Older Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">21. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Starburst Distribution of Presto</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../community_connector.html">12. Community Supported Connectors</a> &raquo;</li>
      
    <li>12.8. Thrift Connector</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/connector/thrift.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="thrift-connector">
<h1>12.8. Thrift Connector</h1>
<p>The Thrift connector makes it possible to integrate with external storage systems
without a custom Presto connector implementation.</p>
<p>In order to use the Thrift connector with an external system, you need to implement
the <code class="docutils literal"><span class="pre">PrestoThriftService</span></code> interface, found below. Next, you configure the Thrift connector
to point to a set of machines, called Thrift servers, that implement the interface.
As part of the interface implementation, the Thrift servers will provide metadata,
splits and data. The Thrift server instances are assumed to be stateless and independent
from each other.</p>
<div class="section" id="configuration">
<h2>Configuration</h2>
<p>To configure the Thrift connector, create a catalog properties file
<code class="docutils literal"><span class="pre">~/.prestoadmin/catalog/thrift.properties</span></code> with the following content,
replacing the properties as appropriate:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>connector.name=presto-thrift
static-location.hosts=host:port,host:port
</pre></div>
</div>
<div class="section" id="multiple-thrift-systems">
<h3>Multiple Thrift Systems</h3>
<p>You can have as many catalogs as you need, so if you have additional
Thrift systems to connect to, simply add another properties file to <code class="docutils literal"><span class="pre">~/.prestoadmin/catalog</span></code>
with a different name (making sure it ends in <code class="docutils literal"><span class="pre">.properties</span></code>).</p>
</div>
</div>
<div class="section" id="configuration-properties">
<h2>Configuration Properties</h2>
<p>The following configuration properties are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">static-location.hosts</span></code></td>
<td>Location of Thrift servers</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">presto-thrift.max-response-size</span></code></td>
<td>Maximum size of a response from thrift server</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">presto-thrift.metadata-refresh-threads</span></code></td>
<td>Number of refresh threads for metadata cache</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">presto-thrift.max-retry-attempts</span></code></td>
<td>Maximum number of retries for failed Thrift requests</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">presto-thrift.min-retry-sleep-time</span></code></td>
<td>Minimum interval between retry attempts</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">presto-thrift.max-retry-sleep-time</span></code></td>
<td>Maximum interval between retry attempts</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">presto-thrift.min-retry-duration</span></code></td>
<td>Maximum duration across all attempts of a Thrift request</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">presto-thrift.retry-scale-factor</span></code></td>
<td>Scale factor for exponential back off</td>
</tr>
</tbody>
</table>
<div class="section" id="static-location-hosts">
<h3><code class="docutils literal"><span class="pre">static-location.hosts</span></code></h3>
<p>Comma-separated list of thrift servers in the form of <code class="docutils literal"><span class="pre">host:port</span></code>. For example:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>static-location.hosts=192.0.2.3:7777,192.0.2.4:7779
</pre></div>
</div>
<p>This property is required; there is no default.</p>
</div>
<div class="section" id="presto-thrift-max-response-size">
<h3><code class="docutils literal"><span class="pre">presto-thrift.max-response-size</span></code></h3>
<p>Maximum size of a data response that the connector accepts. This value is sent
by the connector to the Thrift server when requesting data, allowing it to size
the response appropriately.</p>
<p>This property is optional; the default is <code class="docutils literal"><span class="pre">16MB</span></code>.</p>
</div>
<div class="section" id="presto-thrift-metadata-refresh-threads">
<h3><code class="docutils literal"><span class="pre">presto-thrift.metadata-refresh-threads</span></code></h3>
<p>Number of refresh threads for metadata cache.</p>
<p>This property is optional; the default is <code class="docutils literal"><span class="pre">1</span></code>.</p>
</div>
<div class="section" id="thrift-client-properties">
<h3>Thrift Client Properties</h3>
<p>The following properties allow configuring the Thrift client used by the connector:</p>
<table border="1" class="docutils">
<colgroup>
<col width="62%" />
<col width="22%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">PrestoThriftService.thrift.client.connect-timeout</span></code></td>
<td>Connect timeout</td>
<td><code class="docutils literal"><span class="pre">500ms</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">PrestoThriftService.thrift.client.max-frame-size</span></code></td>
<td>Max frame size</td>
<td><code class="docutils literal"><span class="pre">16MB</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">PrestoThriftService.thrift.client.read-timeout</span></code></td>
<td>Read timeout</td>
<td><code class="docutils literal"><span class="pre">10s</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">PrestoThriftService.thrift.client.receive-timeout</span></code></td>
<td>Receive timeout</td>
<td><code class="docutils literal"><span class="pre">1m</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">PrestoThriftService.thrift.client.socks-proxy</span></code></td>
<td>Socks proxy address</td>
<td><code class="docutils literal"><span class="pre">null</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">PrestoThriftService.thrift.client.write-timeout</span></code></td>
<td>Write timeout</td>
<td><code class="docutils literal"><span class="pre">1m</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="thrift-idl-file">
<h2>Thrift IDL File</h2>
<p>The following IDL describes the <code class="docutils literal"><span class="pre">PrestoThriftService</span></code> that must be implemented:</p>
<div class="highlight-thrift"><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="nn">java.swift</span><span class="w"> </span><span class="n">com.facebook.presto.connector.thrift.api</span><span class="w"></span>


<span class="kd">enum</span><span class="w"> </span><span class="nc">PrestoThriftBound</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">BELOW</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">EXACTLY</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">ABOVE</span><span class="o">=</span><span class="mi">3</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">exception</span><span class="w"> </span><span class="nc">PrestoThriftServiceException</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="n">message</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">retryable</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftNullableSchemaName</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">schemaName</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftSchemaTableName</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="n">schemaName</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="n">tableName</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftColumnMetadata</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="n">type</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">comment</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">4</span><span class="p">:</span><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">hidden</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftNullableColumnSet</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">set</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">columns</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Set that either includes all values, or excludes all values.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftAllOrNoneValueSet</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">all</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Elements of {@code nulls} array determine if a value for a corresponding row is null.</span>
<span class="cm"> * Elements of {@code ints} array are values for each row. If row is null then value is ignored.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftInteger</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">nulls</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">i32</span><span class="p">&gt;</span><span class="w"> </span><span class="n">ints</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Elements of {@code nulls} array determine if a value for a corresponding row is null.</span>
<span class="cm"> * Elements of {@code longs} array are values for each row. If row is null then value is ignored.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftBigint</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">nulls</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">i64</span><span class="p">&gt;</span><span class="w"> </span><span class="n">longs</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Elements of {@code nulls} array determine if a value for a corresponding row is null.</span>
<span class="cm"> * Elements of {@code doubles} array are values for each row. If row is null then value is ignored.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftDouble</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">nulls</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">double</span><span class="p">&gt;</span><span class="w"> </span><span class="n">doubles</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Elements of {@code nulls} array determine if a value for a corresponding row is null.</span>
<span class="cm"> * Each elements of {@code sizes} array contains the length in bytes for the corresponding element.</span>
<span class="cm"> * If row is null then the corresponding element in {@code sizes} is ignored.</span>
<span class="cm"> * {@code bytes} array contains UTF-8 encoded byte values.</span>
<span class="cm"> * Values for all rows are written to {@code bytes} array one after another.</span>
<span class="cm"> * The total number of bytes must be equal to the sum of all sizes.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftVarchar</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">nulls</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">i32</span><span class="p">&gt;</span><span class="w"> </span><span class="n">sizes</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">binary</span><span class="w"> </span><span class="n">bytes</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Elements of {@code nulls} array determine if a value for a corresponding row is null.</span>
<span class="cm"> * Elements of {@code booleans} array are values for each row. If row is null then value is ignored.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftBoolean</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">nulls</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">booleans</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Elements of {@code nulls} array determine if a value for a corresponding row is null.</span>
<span class="cm"> * Elements of {@code dates} array are date values for each row represented as the number</span>
<span class="cm"> * of days passed since 1970-01-01.</span>
<span class="cm"> * If row is null then value is ignored.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftDate</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">nulls</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">i32</span><span class="p">&gt;</span><span class="w"> </span><span class="n">dates</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Elements of {@code nulls} array determine if a value for a corresponding row is null.</span>
<span class="cm"> * Elements of {@code timestamps} array are values for each row represented as the number</span>
<span class="cm"> * of milliseconds passed since 1970-01-01T00:00:00 UTC.</span>
<span class="cm"> * If row is null then value is ignored.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftTimestamp</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">nulls</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">i64</span><span class="p">&gt;</span><span class="w"> </span><span class="n">timestamps</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Elements of {@code nulls} array determine if a value for a corresponding row is null.</span>
<span class="cm"> * Each elements of {@code sizes} array contains the length in bytes for the corresponding element.</span>
<span class="cm"> * If row is null then the corresponding element in {@code sizes} is ignored.</span>
<span class="cm"> * {@code bytes} array contains UTF-8 encoded byte values for string representation of json.</span>
<span class="cm"> * Values for all rows are written to {@code bytes} array one after another.</span>
<span class="cm"> * The total number of bytes must be equal to the sum of all sizes.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftJson</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">nulls</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">i32</span><span class="p">&gt;</span><span class="w"> </span><span class="n">sizes</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">binary</span><span class="w"> </span><span class="n">bytes</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Elements of {@code nulls} array determine if a value for a corresponding row is null.</span>
<span class="cm"> * Each elements of {@code sizes} array contains the length in bytes for the corresponding element.</span>
<span class="cm"> * If row is null then the corresponding element in {@code sizes} is ignored.</span>
<span class="cm"> * {@code bytes} array contains encoded byte values for HyperLogLog representation as defined in</span>
<span class="cm"> * Airlift specification: href=&quot;https://github.com/airlift/airlift/blob/master/stats/docs/hll.md</span>
<span class="cm"> * Values for all rows are written to {@code bytes} array one after another.</span>
<span class="cm"> * The total number of bytes must be equal to the sum of all sizes.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftHyperLogLog</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">nulls</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">i32</span><span class="p">&gt;</span><span class="w"> </span><span class="n">sizes</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">binary</span><span class="w"> </span><span class="n">bytes</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * Elements of {@code nulls} array determine if a value for a corresponding row is null.</span>
<span class="cm"> * Each elements of {@code sizes} array contains the number of elements in the corresponding values array.</span>
<span class="cm"> * If row is null then the corresponding element in {@code sizes} is ignored.</span>
<span class="cm"> * {@code values} is a bigint block containing array elements one after another for all rows.</span>
<span class="cm"> * The total number of elements in bigint block must be equal to the sum of all sizes.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftBigintArray</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">nulls</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">i32</span><span class="p">&gt;</span><span class="w"> </span><span class="n">sizes</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftBigint</span><span class="w"> </span><span class="n">values</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftId</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="kt">binary</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftHostAddress</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="n">host</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">i32</span><span class="w"> </span><span class="n">port</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftTableMetadata</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftSchemaTableName</span><span class="w"> </span><span class="n">schemaTableName</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="n">PrestoThriftColumnMetadata</span><span class="p">&gt;</span><span class="w"> </span><span class="n">columns</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">comment</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Returns a list of key sets which can be used for index lookups.</span>
<span class="cm">   * The list is expected to have only unique key sets.</span>
<span class="cm">   * {@code set&lt;set&lt;string&gt;&gt;} is not used here because some languages (like php) don&#39;t support it.</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">set</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;&gt;</span><span class="w"> </span><span class="n">indexableKeys</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftBlock</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftInteger</span><span class="w"> </span><span class="n">integerData</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftBigint</span><span class="w"> </span><span class="n">bigintData</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftDouble</span><span class="w"> </span><span class="n">doubleData</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftVarchar</span><span class="w"> </span><span class="n">varcharData</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftBoolean</span><span class="w"> </span><span class="n">booleanData</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftDate</span><span class="w"> </span><span class="n">dateData</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftTimestamp</span><span class="w"> </span><span class="n">timestampData</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftJson</span><span class="w"> </span><span class="n">jsonData</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftHyperLogLog</span><span class="w"> </span><span class="n">hyperLogLogData</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftBigintArray</span><span class="w"> </span><span class="n">bigintArrayData</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * LOWER UNBOUNDED is specified with an empty value and an ABOVE bound</span>
<span class="cm"> * UPPER UNBOUNDED is specified with an empty value and a BELOW bound</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftMarker</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftBlock</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftBound</span><span class="w"> </span><span class="n">bound</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftNullableToken</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftId</span><span class="w"> </span><span class="n">token</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftSplit</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftId</span><span class="w"> </span><span class="n">splitId</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="n">PrestoThriftHostAddress</span><span class="p">&gt;</span><span class="w"> </span><span class="n">hosts</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftPageResult</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Returns data in a columnar format.</span>
<span class="cm">   * Columns in this list must be in the order they were requested by the engine.</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="n">PrestoThriftBlock</span><span class="p">&gt;</span><span class="w"> </span><span class="n">columnBlocks</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">i32</span><span class="w"> </span><span class="n">rowCount</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftId</span><span class="w"> </span><span class="n">nextToken</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftNullableTableMetadata</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftTableMetadata</span><span class="w"> </span><span class="n">tableMetadata</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * A set containing values that are uniquely identifiable.</span>
<span class="cm"> * Assumes an infinite number of possible values. The values may be collectively included (aka whitelist)</span>
<span class="cm"> * or collectively excluded (aka !whitelist).</span>
<span class="cm"> * This structure is used with comparable, but not orderable types like &quot;json&quot;, &quot;map&quot;.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftEquatableValueSet</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">whiteList</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="n">PrestoThriftBlock</span><span class="p">&gt;</span><span class="w"> </span><span class="n">values</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftRange</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftMarker</span><span class="w"> </span><span class="n">low</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftMarker</span><span class="w"> </span><span class="n">high</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftSplitBatch</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="n">PrestoThriftSplit</span><span class="p">&gt;</span><span class="w"> </span><span class="n">splits</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftId</span><span class="w"> </span><span class="n">nextToken</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm"> * A set containing zero or more Ranges of the same type over a continuous space of possible values.</span>
<span class="cm"> * Ranges are coalesced into the most compact representation of non-overlapping Ranges.</span>
<span class="cm"> * This structure is used with comparable and orderable types like bigint, integer, double, varchar, etc.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftRangeValueSet</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="n">PrestoThriftRange</span><span class="p">&gt;</span><span class="w"> </span><span class="n">ranges</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftValueSet</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftAllOrNoneValueSet</span><span class="w"> </span><span class="n">allOrNoneValueSet</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftEquatableValueSet</span><span class="w"> </span><span class="n">equatableValueSet</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="n">PrestoThriftRangeValueSet</span><span class="w"> </span><span class="n">rangeValueSet</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftDomain</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftValueSet</span><span class="w"> </span><span class="n">valueSet</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">nullAllowed</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">struct</span><span class="w"> </span><span class="nc">PrestoThriftTupleDomain</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Return a map of column names to constraints.</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kt">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">PrestoThriftDomain</span><span class="p">&gt;</span><span class="w"> </span><span class="n">domains</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Presto Thrift service definition.</span>
<span class="cm"> * This thrift service needs to be implemented in order to be used with Thrift Connector.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kd">service</span><span class="w"> </span><span class="nc">PrestoThriftService</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Returns available schema names.</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="nf">prestoListSchemaNames</span><span class="o">(</span><span class="p">)</span><span class="w"> </span><span class="k">throws</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">PrestoThriftServiceException</span><span class="w"> </span><span class="n">ex1</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Returns tables for the given schema name.</span>
<span class="cm">   * </span>
<span class="cm">   * @param schemaNameOrNull a structure containing schema name or {@literal null}</span>
<span class="cm">   * @return a list of table names with corresponding schemas. If schema name is null then returns</span>
<span class="cm">   * a list of tables for all schemas. Returns an empty list if a schema does not exist</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="n">PrestoThriftSchemaTableName</span><span class="p">&gt;</span><span class="w"> </span><span class="nf">prestoListTables</span><span class="o">(</span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftNullableSchemaName</span><span class="w"> </span><span class="n">schemaNameOrNull</span><span class="p">)</span><span class="w"> </span><span class="k">throws</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">PrestoThriftServiceException</span><span class="w"> </span><span class="n">ex1</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Returns metadata for a given table.</span>
<span class="cm">   * </span>
<span class="cm">   * @param schemaTableName schema and table name</span>
<span class="cm">   * @return metadata for a given table, or a {@literal null} value inside if it does not exist</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">PrestoThriftNullableTableMetadata</span><span class="w"> </span><span class="nf">prestoGetTableMetadata</span><span class="o">(</span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftSchemaTableName</span><span class="w"> </span><span class="n">schemaTableName</span><span class="p">)</span><span class="w"> </span><span class="k">throws</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">PrestoThriftServiceException</span><span class="w"> </span><span class="n">ex1</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Returns a batch of splits.</span>
<span class="cm">   * </span>
<span class="cm">   * @param schemaTableName schema and table name</span>
<span class="cm">   * @param desiredColumns a superset of columns to return; empty set means &quot;no columns&quot;, {@literal null} set means &quot;all columns&quot;</span>
<span class="cm">   * @param outputConstraint constraint on the returned data</span>
<span class="cm">   * @param maxSplitCount maximum number of splits to return</span>
<span class="cm">   * @param nextToken token from a previous split batch or {@literal null} if it is the first call</span>
<span class="cm">   * @return a batch of splits</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">PrestoThriftSplitBatch</span><span class="w"> </span><span class="nf">prestoGetSplits</span><span class="o">(</span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftSchemaTableName</span><span class="w"> </span><span class="n">schemaTableName</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftNullableColumnSet</span><span class="w"> </span><span class="n">desiredColumns</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftTupleDomain</span><span class="w"> </span><span class="n">outputConstraint</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w">  </span><span class="kt">i32</span><span class="w"> </span><span class="n">maxSplitCount</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftNullableToken</span><span class="w"> </span><span class="n">nextToken</span><span class="p">)</span><span class="w"> </span><span class="k">throws</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">PrestoThriftServiceException</span><span class="w"> </span><span class="n">ex1</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Returns a batch of index splits for the given batch of keys.</span>
<span class="cm">   * This method is called if index join strategy is chosen for a query.</span>
<span class="cm">   * </span>
<span class="cm">   * @param schemaTableName schema and table name</span>
<span class="cm">   * @param indexColumnNames specifies columns and their order for keys</span>
<span class="cm">   * @param outputColumnNames a list of column names to return</span>
<span class="cm">   * @param keys keys for which records need to be returned</span>
<span class="cm">   * @param outputConstraint constraint on the returned data</span>
<span class="cm">   * @param maxSplitCount maximum number of splits to return</span>
<span class="cm">   * @param nextToken token from a previous split batch or {@literal null} if it is the first call</span>
<span class="cm">   * @return a batch of splits</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">PrestoThriftSplitBatch</span><span class="w"> </span><span class="nf">prestoGetIndexSplits</span><span class="o">(</span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftSchemaTableName</span><span class="w"> </span><span class="n">schemaTableName</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">indexColumnNames</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span><span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">outputColumnNames</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftPageResult</span><span class="w"> </span><span class="n">keys</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftTupleDomain</span><span class="w"> </span><span class="n">outputConstraint</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">:</span><span class="w">  </span><span class="kt">i32</span><span class="w"> </span><span class="n">maxSplitCount</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftNullableToken</span><span class="w"> </span><span class="n">nextToken</span><span class="p">)</span><span class="w"> </span><span class="k">throws</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">PrestoThriftServiceException</span><span class="w"> </span><span class="n">ex1</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Returns a batch of rows for the given split.</span>
<span class="cm">   * </span>
<span class="cm">   * @param splitId split id as returned in split batch</span>
<span class="cm">   * @param columns a list of column names to return</span>
<span class="cm">   * @param maxBytes maximum size of returned data in bytes</span>
<span class="cm">   * @param nextToken token from a previous batch or {@literal null} if it is the first call</span>
<span class="cm">   * @return a batch of table data</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">PrestoThriftPageResult</span><span class="w"> </span><span class="nf">prestoGetRows</span><span class="o">(</span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftId</span><span class="w"> </span><span class="n">splitId</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="kt">list</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">columns</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span><span class="w">  </span><span class="kt">i64</span><span class="w"> </span><span class="n">maxBytes</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w">  </span><span class="n">PrestoThriftNullableToken</span><span class="w"> </span><span class="n">nextToken</span><span class="p">)</span><span class="w"> </span><span class="k">throws</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">PrestoThriftServiceException</span><span class="w"> </span><span class="n">ex1</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../installation.html" class="btn btn-neutral float-right" title="13. Community Supported Functionality" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="redshift.html" class="btn btn-neutral" title="12.7. Redshift Connector" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.195-e.0.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>