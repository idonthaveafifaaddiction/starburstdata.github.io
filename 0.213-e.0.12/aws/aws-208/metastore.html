

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Deploying Presto Metastore &mdash; Starburst Distribution of Presto 0.213-e.0.12 Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Starburst Distribution of Presto 0.213-e.0.12 Documentation" href="../../index.html"/>
        <link rel="up" title="4.2. Presto 208e on Amazon Web Services (Previous Release)" href="../aws-208.html"/>
        <link rel="next" title="AWS Glue Support" href="glue.html"/>
        <link rel="prev" title="Querying AWS S3" href="s3.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Starburst Distribution of Presto
          

          
          </a>

          
            
            
              <div class="version">
                0.213-e.0.12
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../system-requirements.html">2. License and System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docker.html">3. Running Presto in a Docker container</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../aws.html">4. Presto 213e on Amazon Web Services</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../whats-new.html">4.1. What&#8217;s New in Presto 213e on AWS</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../aws-208.html">4.2. Presto 208e on Amazon Web Services (Previous Release)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="quickstart.html">Getting Started: A Quick Guide to Presto on AWS</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html">Overview of Presto on AWS</a></li>
<li class="toctree-l3"><a class="reference internal" href="prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="deploy.html">Deploying Presto</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">Configuring Presto</a></li>
<li class="toctree-l3"><a class="reference internal" href="access.html">Accessing the Presto Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="query.html">Querying Presto</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3.html">Querying AWS S3</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Deploying Presto Metastore</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deploying">Deploying</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="glue.html">AWS Glue Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="superset.html">Using Apache Superset</a></li>
<li class="toctree-l3"><a class="reference internal" href="manualscale.html">Manual Scaling a Running Presto Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoscale.html">Auto Scaling a Running Presto Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="uninstall.html">Uninstalling Presto</a></li>
<li class="toctree-l3"><a class="reference internal" href="resources.html">Related Resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html">4.3. Getting Started: A Quick Guide to Presto on AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html">4.4. Overview of Presto on AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prerequisites.html">4.5. Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html">4.6. Deploying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration.html">4.7. Configuring Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metastore.html">4.8. Configuring Hive Metastore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../access.html">4.9. Accessing the Presto Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../query.html">4.10. Querying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../s3.html">4.11. Querying AWS S3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glue.html">4.12. AWS Glue Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../superset.html">4.13. Using Apache Superset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manualscale.html">4.14. Manual Scaling a Running Presto Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoscale.html">4.15. Auto Scaling a Running Presto Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../high-availability.html">4.16. Presto Coordinator High Availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logs.html">4.17. Integration with CloudWatch Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">4.18. Integration with CloudWatch metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html">4.19. Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uninstall.html">4.20. Uninstalling Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources.html">4.21. Related Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../azure.html">5. Presto on Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-rpm.html">6. Presto RPM Installation using Presto Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/deployment.html">7. Presto Tarball Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client.html">8. Presto Client Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">9. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin.html">10. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connector.html">11. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../functions.html">12. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language.html">13. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sql.html">14. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration.html">15. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../optimizer.html">16. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develop.html">17. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">18. Older Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">19. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Starburst Distribution of Presto</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../../aws.html">4. Presto 213e on Amazon Web Services</a> &raquo;</li>
      
        <li><a href="../aws-208.html">4.2. Presto 208e on Amazon Web Services (Previous Release)</a> &raquo;</li>
      
    <li>Deploying Presto Metastore</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../../_sources/aws/aws-208/metastore.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deploying-presto-metastore">
<h1>Deploying Presto Metastore</h1>
<p>Starburstdata provides a CloudFormation template for deploying standalone Hive Metastore backed by an RDS database. This is optional and only needed if you do not have or want to use an existing Hive Metastore. See the <a class="reference internal" href="s3.html#aws-s3-hive-connector"><span class="std std-ref">Hive Connector</span></a> in the <a class="reference internal" href="../s3.html"><span class="doc">Querying AWS S3</span></a> documentation.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites</h2>
<p>Refer to the same <a class="reference internal" href="../prerequisites.html"><span class="doc">Prerequisites</span></a> for deploying a Presto cluster using Starburst&#8217;s CloudFormation template.</p>
</div>
<div class="section" id="deploying">
<h2>Deploying</h2>
<dl class="docutils">
<dt><strong>1.  Select Template</strong></dt>
<dd><p class="first">Navigate to CloudFormation in the AWS console then choose &#8220;Create Stack&#8221;. On the Select Template form choose &#8220;Specify an Amazon S3 template URL&#8221; and insert <code class="docutils literal"><span class="pre">https://s3.us-east-2.amazonaws.com/starburstdata/cloudformation/PrestoMetastore.yml</span></code>.</p>
<p class="last">Then click &#8220;next&#8221;.</p>
</dd>
</dl>
<p><strong>2. Specify Details</strong></p>
<blockquote>
<div><p>Proceed by specifying the details of your Presto cluster (CloudFormation stack). This step includes Metastore and RDS Database configurations.</p>
<ul>
<li><p class="first"><strong>Preliminary Details:</strong> Name your cluster.</p>
<a class="reference internal image-reference" href="../../_images/presto_metastore_stackname.png"><img alt="../../_images/presto_metastore_stackname.png" src="../../_images/presto_metastore_stackname.png" style="width: 1223.0px; height: 148.0px;" /></a>
</li>
<li><p class="first"><strong>Metastore Network Configuration:</strong> Specify your existing VPC, Subnet, and Security Groups. See <a class="reference internal" href="../prerequisites.html"><span class="doc">Prerequisites</span></a> section for more detail.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/presto_metastore_network.png"><img alt="../../_images/presto_metastore_network.png" src="../../_images/presto_metastore_network.png" style="width: 1154.0px; height: 261.0px;" /></a>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt><strong>Metastore Configuration</strong></dt>
<dd><dl class="first docutils">
<dt>Choose:</dt>
<dd><ul class="first last simple">
<li><strong>Key Name:</strong> Name of an EC2 KeyPair to enable SSH access to the instance</li>
<li><strong>Termination Protection</strong>: Specify termination protection for your Metastore instance.</li>
<li><strong>Metastore Warehouse S3 Location:</strong> By default, the Metastore default schema points to HDFS that is running as part of a single node Metastore instance. However, you can specify that default schema should be located at S3 bucket (recommended)</li>
<li><strong>Metastore Log URI:</strong> S3 location where Metastore logs should be uploaded. This is useful when you want to investigate Metastore failures.</li>
<li><strong>Metastore Node Instance Profile:</strong> This is by default set to <code class="docutils literal"><span class="pre">EMR_EC2_DefaultRole</span></code>, which is a default role assigned by EMR to nodes. It could be that this role wasn’t created yet. In that case, you could create this default role by following these <a class="reference external" href="https://docs.aws.amazon.com/cli/latest/reference/emr/create-default-roles.html">instructions</a>.</li>
<li><strong>Service Role:</strong> Defines the allowable actions for Amazon EMR when provisioning Metastore EMR instances. The default role is EMR_DefaultRole. It could be that this default role wasn’t created yet. In that case, you could create this default role by following these <a class="reference external" href="https://docs.aws.amazon.com/cli/latest/reference/emr/create-default-roles.html">instructions</a>.</li>
</ul>
</dd>
</dl>
<a class="last reference internal image-reference" href="../../_images/presto_metastore_configuration.png"><img alt="../../_images/presto_metastore_configuration.png" src="../../_images/presto_metastore_configuration.png" style="width: 1084.0px; height: 418.0px;" /></a>
</dd>
</dl>
</li>
<li><p class="first"><strong>Database Configuration</strong></p>
<blockquote>
<div><p>Choose database subnets, database name, and optionally username/password and storage.</p>
<a class="reference internal image-reference" href="../../_images/presto_metastore_database.png"><img alt="../../_images/presto_metastore_database.png" src="../../_images/presto_metastore_database.png" style="width: 1181.0px; height: 385.0px;" /></a>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p><strong>3. Options</strong></p>
<p>Enter any additional cluster specifications as shown on the Options page. These options include adding tags to resources within your cluster, choosing IAM roles, and specifying monitoring time for rollback triggers, among other advanced specifications. For further insight into said options follow the link to the <a class="reference external" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html">AWS CloudFormation documentation</a>.</p>
<p><strong>4. Review</strong></p>
<p>Finally, review the details of your cluster. When content, proceed by pressing create to conclude the creation of your Presto cluster.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="glue.html" class="btn btn-neutral float-right" title="AWS Glue Support" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="s3.html" class="btn btn-neutral" title="Querying AWS S3" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.213-e.0.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>