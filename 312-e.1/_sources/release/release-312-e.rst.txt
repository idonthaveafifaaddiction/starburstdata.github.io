=============
Release 312-e
=============

General Changes
---------------

* Display actual statistics in ``EXPLAIN ANALYZE VERBOSE``.
* Improve cardinality estimation for aggregations.
* Add Oracle compatibility functions
* Add support for column statistics in Glue.
* Add support for Glue API proxy.
* Support prepared statements that are longer than 4K bytes.
* Add :doc:`/connector/generic-jdbc`.
* Add :doc:`/connector/oracle` (requires license).
* Add :doc:`/connector/bigquery` (requires license).
* Add :doc:`/connector/teradata` (requires license).
* Add :doc:`/connector/hive-mapr` (requires license).
* Support resource group selection based on client tags for enterprise ODBC and JDBC drivers.
* Add compression and encryption support for Spill to Disk.
* Enable Cost-Based Optimizer (CBO) by default.
* Add CloudWatch Agent compatible logger.
* Fix incorrect results when dividing certain decimal numbers.

Security Changes
----------------

* Add security audit log collection.
* Add ``ldap.bind-dn`` and ``ldap.bind-password`` LDAP properties to allow LDAP authentication access LDAP server using service account.
* Add optional additional security configuration options for authorizing resource access on HTTP level.
  See :ref:`file-based-system-access-control-resource-rules` for more information.
* Raise required Java version to 8u161. This version allows unlimited strength crypto.

CLI Changes
-----------

* Fix failure when selecting a value of type ``UUID``.

JDBC Changes
------------

* Fix failure when selecting a value of type ``UUID``.

Hive Connector Changes
----------------------

* Add support for Azure Data Lake Storage gen 2 (ABFS).
* Enable Hive views execution using a config toggle.
* Support CSV table storage format.
* Support Apache Ranger authorization (requires licence).
* Support Apache Sentry authorization (requires licence).
* Support Avro tables with ``avro.schema.url`` in kerberized HDFS.
* Fix Avro schema loading when SERDEPROPERTIES set.
* Support partitioned Avro table with very long column type definition.
* Support tables located in HDFS encryption zones managed with Hadoop KMS.
* Add support for user impersonation when communicating with Hive Metastore.
* Add ``hive.s3.positioned-reads.enabled`` configuration property allowing disabling positioned reads optimization.
  Consider disabling the optimization when working with small Parquet files.


SQL Server Connector Changes
----------------------------

* Support user impersonation.
* Support retrieving table and column statistics. The statistics can be inspected with :doc:`/sql/show-stats` and are taken into account in
  :doc:`/optimizer/cost-based-optimizations`.

PostgreSQL Connector Changes
----------------------------

* Support user impersonation.
* Support retrieving table and column statistics. The statistics can be inspected with :doc:`/sql/show-stats` and are taken into account in
  :doc:`/optimizer/cost-based-optimizations`.

MySQL Connector Changes
-----------------------

* Support retrieving table and column statistics. The statistics can be inspected with :doc:`/sql/show-stats` and are taken into account in
  :doc:`/optimizer/cost-based-optimizations`.

JDBC based Connectors Changes
-----------------------------

* Add metadata cache that is configured with ``metadata.cache-ttl`` and ``metadata.cache-missing``.
  By default caching is disabled (equivalent to ``metadata.cache-ttl=0s`` and ``metadata.cache-missing=false``).
* Collect JMX metrics about metadata information collection and connection usage.

MongoDB Connector Changes
-------------------------

* Fix queries involving joins or aggregations on ``ObjectId`` type.
* Fix queries involving joins or aggregations on ``row`` types containing ``ObjectId``.

Server RPM Changes
------------------

* Change default location of the ``http-request.log`` to ``/var/log/presto``.
  Previously, the log would be located in ``/var/lib/presto/data/var/log`` by default.
