

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>17.22. EXPLAIN &mdash; Starburst Distribution of Presto 323-e.0 Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Distribution of Presto 323-e.0 Documentation" href="../index.html"/>
        <link rel="up" title="17. SQL Statement Syntax" href="../sql.html"/>
        <link rel="next" title="17.23. EXPLAIN ANALYZE" href="explain-analyze.html"/>
        <link rel="prev" title="17.21. EXECUTE" href="execute.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Distribution of Presto
          

          
          </a>

          
            
            
              <div class="version">
                323-e.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system-requirements.html">2. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">3. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">4. Running Presto in a Docker container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">5. Presto on Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure.html">6. Presto on Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">7. Presto on Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation-rpm.html">8. Presto RPM Installation using Presto Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/deployment.html">9. Presto Tarball Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">10. Presto Client Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">11. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">12. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">13. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">14. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">15. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">16. SQL Language</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../sql.html">17. SQL Statement Syntax</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="alter-schema.html">17.1. ALTER SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="alter-table.html">17.2. ALTER TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="analyze.html">17.3. ANALYZE</a></li>
<li class="toctree-l2"><a class="reference internal" href="call.html">17.4. CALL</a></li>
<li class="toctree-l2"><a class="reference internal" href="comment.html">17.5. COMMENT</a></li>
<li class="toctree-l2"><a class="reference internal" href="commit.html">17.6. COMMIT</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-role.html">17.7. CREATE ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-schema.html">17.8. CREATE SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-table.html">17.9. CREATE TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-table-as.html">17.10. CREATE TABLE AS</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-view.html">17.11. CREATE VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="deallocate-prepare.html">17.12. DEALLOCATE PREPARE</a></li>
<li class="toctree-l2"><a class="reference internal" href="delete.html">17.13. DELETE</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe.html">17.14. DESCRIBE</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe-input.html">17.15. DESCRIBE INPUT</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe-output.html">17.16. DESCRIBE OUTPUT</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-role.html">17.17. DROP ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-schema.html">17.18. DROP SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-table.html">17.19. DROP TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-view.html">17.20. DROP VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="execute.html">17.21. EXECUTE</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">17.22. EXPLAIN</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="explain-analyze.html">17.23. EXPLAIN ANALYZE</a></li>
<li class="toctree-l2"><a class="reference internal" href="grant.html">17.24. GRANT</a></li>
<li class="toctree-l2"><a class="reference internal" href="grant-roles.html">17.25. GRANT ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="insert.html">17.26. INSERT</a></li>
<li class="toctree-l2"><a class="reference internal" href="prepare.html">17.27. PREPARE</a></li>
<li class="toctree-l2"><a class="reference internal" href="reset-session.html">17.28. RESET SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="revoke.html">17.29. REVOKE</a></li>
<li class="toctree-l2"><a class="reference internal" href="revoke-roles.html">17.30. REVOKE ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="rollback.html">17.31. ROLLBACK</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html">17.32. SELECT</a></li>
<li class="toctree-l2"><a class="reference internal" href="set-role.html">17.33. SET ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="set-session.html">17.34. SET SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-catalogs.html">17.35. SHOW CATALOGS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-columns.html">17.36. SHOW COLUMNS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-create-table.html">17.37. SHOW CREATE TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-create-view.html">17.38. SHOW CREATE VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-functions.html">17.39. SHOW FUNCTIONS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-grants.html">17.40. SHOW GRANTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-role-grants.html">17.41. SHOW ROLE GRANTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-roles.html">17.42. SHOW ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-schemas.html">17.43. SHOW SCHEMAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-session.html">17.44. SHOW SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-stats.html">17.45. SHOW STATS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-tables.html">17.46. SHOW TABLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="start-transaction.html">17.47. START TRANSACTION</a></li>
<li class="toctree-l2"><a class="reference internal" href="use.html">17.48. USE</a></li>
<li class="toctree-l2"><a class="reference internal" href="values.html">17.49. VALUES</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">18. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">19. Older Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">20. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">21. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Starburst Distribution of Presto</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../sql.html">17. SQL Statement Syntax</a> &raquo;</li>
      
    <li>17.22. EXPLAIN</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/sql/explain.rst.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="explain">
<h1>17.22. EXPLAIN</h1>
<div class="section" id="synopsis">
<h2>Synopsis</h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EXPLAIN [ ( option [, ...] ) ] statement

where option can be one of:

    FORMAT { TEXT | GRAPHVIZ | JSON }
    TYPE { LOGICAL | DISTRIBUTED | VALIDATE | IO }
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description</h2>
<p>Show the logical or distributed execution plan of a statement, or validate the statement.
Use <code class="docutils literal notranslate"><span class="pre">TYPE</span> <span class="pre">DISTRIBUTED</span></code> option to display fragmented plan. Each plan fragment is executed by
a single or multiple Presto nodes. Fragments separation represent the data exchange between Presto nodes.
Fragment type specifies how the fragment is executed by Presto nodes and how the data is
distributed between fragments:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">SINGLE</span></code></dt>
<dd>Fragment is executed on a single node.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">HASH</span></code></dt>
<dd>Fragment is executed on a fixed number of nodes with the input data
distributed using a hash function.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ROUND_ROBIN</span></code></dt>
<dd>Fragment is executed on a fixed number of nodes with the input data
distributed in a round-robin fashion.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">BROADCAST</span></code></dt>
<dd>Fragment is executed on a fixed number of nodes with the input data
broadcasted to all nodes.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SOURCE</span></code></dt>
<dd>Fragment is executed on nodes where input splits are accessed.</dd>
</dl>
</div>
<div class="section" id="examples">
<h2>Examples</h2>
<p>Logical plan:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>presto:tiny&gt; EXPLAIN SELECT regionkey, count(*) FROM nation GROUP BY 1;
                                                   Query Plan
-----------------------------------------------------------------------------------------------------------------
 Output[regionkey, _col1]
 │   Layout: [regionkey:bigint, count:bigint]
 │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
 │   _col1 := count
 └─ RemoteExchange[GATHER]
    │   Layout: [regionkey:bigint, count:bigint]
    │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
    └─ Aggregate(FINAL)[regionkey]
       │   Layout: [regionkey:bigint, count:bigint]
       │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
       │   count := count(&quot;count_8&quot;)
       └─ LocalExchange[HASH][$hashvalue] (&quot;regionkey&quot;)
          │   Layout: [regionkey:bigint, count_8:bigint, $hashvalue:bigint]
          │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
          └─ RemoteExchange[REPARTITION][$hashvalue_9]
             │   Layout: [regionkey:bigint, count_8:bigint, $hashvalue_9:bigint]
             │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
             └─ Project[]
                │   Layout: [regionkey:bigint, count_8:bigint, $hashvalue_10:bigint]
                │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
                │   $hashvalue_10 := &quot;combine_hash&quot;(bigint &#39;0&#39;, COALESCE(&quot;$operator$hash_code&quot;(&quot;regionkey&quot;), 0))
                └─ Aggregate(PARTIAL)[regionkey]
                   │   Layout: [regionkey:bigint, count_8:bigint]
                   │   count_8 := count(*)
                   └─ TableScan[tpch:nation:sf0.01]
                          Layout: [regionkey:bigint]
                          Estimates: {rows: 25 (225B), cpu: 225, memory: 0B, network: 0B}
                          regionkey := tpch:regionkey
</pre></div>
</div>
<p>Distributed plan:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>presto:tiny&gt; EXPLAIN (TYPE DISTRIBUTED) SELECT regionkey, count(*) FROM nation GROUP BY 1;
                                              Query Plan
------------------------------------------------------------------------------------------------------
 Fragment 0 [SINGLE]
     Output layout: [regionkey, count]
     Output partitioning: SINGLE []
     Stage Execution Strategy: UNGROUPED_EXECUTION
     Output[regionkey, _col1]
     │   Layout: [regionkey:bigint, count:bigint]
     │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
     │   _col1 := count
     └─ RemoteSource[1]
            Layout: [regionkey:bigint, count:bigint]

 Fragment 1 [HASH]
     Output layout: [regionkey, count]
     Output partitioning: SINGLE []
     Stage Execution Strategy: UNGROUPED_EXECUTION
     Aggregate(FINAL)[regionkey]
     │   Layout: [regionkey:bigint, count:bigint]
     │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
     │   count := count(&quot;count_8&quot;)
     └─ LocalExchange[HASH][$hashvalue] (&quot;regionkey&quot;)
        │   Layout: [regionkey:bigint, count_8:bigint, $hashvalue:bigint]
        │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
        └─ RemoteSource[2]
               Layout: [regionkey:bigint, count_8:bigint, $hashvalue_9:bigint]

 Fragment 2 [SOURCE]
     Output layout: [regionkey, count_8, $hashvalue_10]
     Output partitioning: HASH [regionkey][$hashvalue_10]
     Stage Execution Strategy: UNGROUPED_EXECUTION
     Project[]
     │   Layout: [regionkey:bigint, count_8:bigint, $hashvalue_10:bigint]
     │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
     │   $hashvalue_10 := &quot;combine_hash&quot;(bigint &#39;0&#39;, COALESCE(&quot;$operator$hash_code&quot;(&quot;regionkey&quot;), 0))
     └─ Aggregate(PARTIAL)[regionkey]
        │   Layout: [regionkey:bigint, count_8:bigint]
        │   count_8 := count(*)
        └─ TableScan[tpch:nation:sf0.01, grouped = false]
               Layout: [regionkey:bigint]
               Estimates: {rows: 25 (225B), cpu: 225, memory: 0B, network: 0B}
               regionkey := tpch:regionkey
</pre></div>
</div>
<p>Validate:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>presto:tiny&gt; EXPLAIN (TYPE VALIDATE) SELECT regionkey, count(*) FROM nation GROUP BY 1;
 Valid
-------
 true
</pre></div>
</div>
<p>IO:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>presto:hive&gt; EXPLAIN (TYPE IO, FORMAT JSON) INSERT INTO test_nation SELECT * FROM nation WHERE regionkey = 2;
            Query Plan
-----------------------------------
 {
   &quot;inputTableColumnInfos&quot; : [ {
     &quot;table&quot; : {
       &quot;catalog&quot; : &quot;hive&quot;,
       &quot;schemaTable&quot; : {
         &quot;schema&quot; : &quot;tpch&quot;,
         &quot;table&quot; : &quot;nation&quot;
       }
     },
     &quot;columns&quot; : [ {
       &quot;columnName&quot; : &quot;regionkey&quot;,
       &quot;type&quot; : &quot;bigint&quot;,
       &quot;domain&quot; : {
         &quot;nullsAllowed&quot; : false,
         &quot;ranges&quot; : [ {
           &quot;low&quot; : {
             &quot;value&quot; : &quot;2&quot;,
             &quot;bound&quot; : &quot;EXACTLY&quot;
           },
           &quot;high&quot; : {
             &quot;value&quot; : &quot;2&quot;,
             &quot;bound&quot; : &quot;EXACTLY&quot;
           }
         } ]
       }
     } ],
     &quot;estimate&quot; : {
       &quot;outputRowCount&quot; : 15000.0,
       &quot;outputSizeInBytes&quot; : 1597294.0,
       &quot;cpuCost&quot; : 1597294.0,
       &quot;maxMemory&quot; : 0.0,
       &quot;networkCost&quot; : 0.0
     },
   } ],
   &quot;outputTable&quot; : {
     &quot;catalog&quot; : &quot;hive&quot;,
     &quot;schemaTable&quot; : {
       &quot;schema&quot; : &quot;tpch&quot;,
       &quot;table&quot; : &quot;test_nation&quot;
     }
   },
   &quot;estimate&quot; : {
     &quot;outputRowCount&quot; : 15000.0,
     &quot;outputSizeInBytes&quot; : 1597294.0,
     &quot;cpuCost&quot; : 1597294.0,
     &quot;maxMemory&quot; : 0.0,
     &quot;networkCost&quot; : 1597294.0
   }
 }
</pre></div>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also</h2>
<p><a class="reference internal" href="explain-analyze.html"><span class="doc">EXPLAIN ANALYZE</span></a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="explain-analyze.html" class="btn btn-neutral float-right" title="17.23. EXPLAIN ANALYZE" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="execute.html" class="btn btn-neutral" title="17.21. EXECUTE" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'323-e.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>